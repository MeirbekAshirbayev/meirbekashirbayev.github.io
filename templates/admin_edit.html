<!DOCTYPE html>
<html lang="kk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∞–±–∞“õ—Ç—ã ”®“£–¥–µ—É</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        function addTask() {
            const container = document.getElementById('tasks-container');
            const div = document.createElement('div');
            div.className = "mb-4 border p-4 rounded bg-gray-50";
            div.innerHTML = `
                <div class="grid grid-cols-2 gap-2 mb-2">
                    <div>
                        <label class="block text-gray-700 font-bold mb-1">üá∞üáø –¢–∞–ø—Å—ã—Ä–º–∞ –ê—Ç—ã (“ö–∞–∑–∞“õ—à–∞)</label>
                        <input type="text" name="task_titles[]" class="w-full border p-2 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm" placeholder="–ú—ã—Å–∞–ª—ã: –ì–µ–æ–º–µ—Ç—Ä–∏—è–ª—ã“õ –ü–∞–∑–ª">
                    </div>
                    <div>
                        <label class="block text-gray-700 font-bold mb-1">üá∑üá∫ –¢–∞–ø—Å—ã—Ä–º–∞ –ê—Ç—ã (–û—Ä—ã—Å—à–∞)</label>
                        <input type="text" name="task_titles_ru[]" class="w-full border p-2 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ì–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è –ì–æ–ª–æ–≤–æ–ª–æ–º–∫–∞">
                    </div>
                </div>
                <div class="mb-2">
                    <label class="block text-gray-700 font-bold mb-1">üá∞üáø HTML –ö–æ–¥—ã (“ö–∞–∑–∞“õ—à–∞)</label>
                    <textarea name="task_codes[]" class="w-full border p-2 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono text-sm" rows="3" placeholder="<iframe src='...'></iframe>"></textarea>
                </div>
                <div class="mb-2">
                    <label class="block text-gray-700 font-bold mb-1">üá∑üá∫ HTML –ö–æ–¥—ã (–û—Ä—ã—Å—à–∞)</label>
                    <textarea name="task_codes_ru[]" class="w-full border p-2 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono text-sm" rows="3" placeholder="<iframe src='...'></iframe>"></textarea>
                </div>
                <div class="mb-2">
                    <label class="block text-gray-700 font-bold mb-1">üá∑üá∫ –¢–∞–ø—Å—ã—Ä–º–∞ –°–∏–ø–∞—Ç—Ç–∞–º–∞—Å—ã (–û—Ä—ã—Å—à–∞ HTML)</label>
                    <textarea name="task_descriptions_ru[]" class="w-full border p-2 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono text-sm" rows="3" placeholder="<p>–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è...</p>"></textarea>
                </div>
                <button type="button" onclick="this.parentElement.remove()" class="text-red-500 text-sm mt-2 hover:underline">–¢–∞–ø—Å—ã—Ä–º–∞–Ω—ã ”®—à—ñ—Ä—É</button>
            `;
            container.appendChild(div);
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Set the selected grade
            const gradeSelect = document.getElementById('grade-select');
            gradeSelect.value = "{{ .Lesson.Grade }}";
        });
    </script>
</head>

<body class="bg-gray-100 min-h-screen font-sans flex flex-col">

    <nav class="bg-gray-800 text-white p-4">
        <div class="container mx-auto">
            <a href="/admin" class="font-bold hover:text-gray-300">&larr; –ë–∞—Å“õ–∞—Ä—É –ø–∞–Ω–µ–ª—ñ–Ω–µ –æ—Ä–∞–ª—É</a>
        </div>
    </nav>

    <main class="container mx-auto px-4 py-8 max-w-2xl flex-grow">
        <h1 class="text-3xl font-bold text-gray-800 mb-8">–°–∞–±–∞“õ—Ç—ã ”®“£–¥–µ—É</h1>

        <form action="/admin/edit/{{ .Lesson.ID }}" method="POST" class="bg-white p-8 rounded-lg shadow-lg">

            <div class="grid grid-cols-2 gap-4 mb-6">
                <div>
                    <label class="block text-gray-700 font-bold mb-2">–°—ã–Ω—ã–ø</label>
                    <select id="grade-select" name="grade"
                        class="w-full border p-2 rounded focus:ring-2 focus:ring-indigo-500">
                        <option value="5">5-–°—ã–Ω—ã–ø</option>
                        <option value="6">6-–°—ã–Ω—ã–ø</option>
                        <option value="7">7-–°—ã–Ω—ã–ø</option>
                        <option value="8">8-–°—ã–Ω—ã–ø</option>
                        <option value="9">9-–°—ã–Ω—ã–ø</option>
                        <option value="10">10-–°—ã–Ω—ã–ø</option>
                        <option value="11">11-–°—ã–Ω—ã–ø</option>
                    </select>
                </div>
                <div>
                    <label class="block text-gray-700 font-bold mb-2">üá∞üáø –¢–∞“õ—ã—Ä—ã–ø (“ö–∞–∑–∞“õ—à–∞)</label>
                    <input type="text" name="title" required
                        class="w-full border p-2 rounded focus:ring-2 focus:ring-indigo-500"
                        value="{{ .Lesson.Title }}">
                </div>
            </div>

            <div class="mb-6">
                <label class="block text-gray-700 font-bold mb-2">üá∑üá∫ –¢–∞“õ—ã—Ä—ã–ø (–û—Ä—ã—Å—à–∞)</label>
                <input type="text" name="title_ru" class="w-full border p-2 rounded focus:ring-2 focus:ring-indigo-500"
                    value="{{ .Lesson.TitleRu }}" placeholder="–û—Ä—ã—Å—à–∞ —Ç–∞“õ—ã—Ä—ã–ø (–º—ã—Å: –ù–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ —á–∏—Å–ª–∞)">
            </div>

            <div class="mb-6">
                <label class="block text-gray-700 font-bold mb-2">üá∞üáø Canva –°—ñ–ª—Ç–µ–º–µ—Å—ñ (“ö–∞–∑–∞“õ—à–∞)</label>
                <input type="text" name="canva_url" required
                    class="w-full border p-2 rounded focus:ring-2 focus:ring-indigo-500"
                    value="{{ .Lesson.CanvaEmbedURL }}">
            </div>

            <div class="mb-6">
                <label class="block text-gray-700 font-bold mb-2">üá∑üá∫ Canva –°—ñ–ª—Ç–µ–º–µ—Å—ñ (–û—Ä—ã—Å—à–∞)</label>
                <input type="text" name="canva_url_ru"
                    class="w-full border p-2 rounded focus:ring-2 focus:ring-indigo-500"
                    value="{{ .Lesson.CanvaEmbedURLRu }}" placeholder="–û—Ä—ã—Å—à–∞ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è —Å—ñ–ª—Ç–µ–º–µ—Å—ñ">
            </div>

            <div class="mb-6">
                <label class="block text-gray-700 font-bold mb-2">–°–æ—Ä—Ç—Ç–∞—É —Ä–µ—Ç—ñ</label>
                <p class="text-xs text-gray-500 mb-2">–ú—ã—Å–∞–ª—ã: 1.1‚Üí101, 1.10‚Üí110, 2.1‚Üí201, 3.5‚Üí305</p>
                <input type="number" name="sort_order" value="{{ .Lesson.SortOrder }}"
                    class="w-full border p-2 rounded focus:ring-2 focus:ring-indigo-500" placeholder="101">
            </div>

            <div class="mb-6">
                <label class="block text-gray-700 font-bold mb-2">üá∑üá∫ –û—Ä—ã—Å—à–∞ –¢–µ–æ—Ä–∏—è (HTML/CSS/JS)</label>
                <p class="text-xs text-gray-500 mb-2">–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è –∞—Å—Ç—ã–Ω–¥–∞“ì—ã –æ—Ä—ã—Å—à–∞ –º–∞–∑–º“±–Ω. HTML/CSS/JS “õ–æ–ª–¥–∞–Ω—É“ì–∞ –±–æ–ª–∞–¥—ã.
                </p>
                <textarea name="theory_ru" rows="10"
                    class="w-full border p-2 rounded focus:ring-2 focus:ring-indigo-500 font-mono text-sm"
                    placeholder="<div class='p-4'><h3>–¢–µ–æ—Ä–∏—è</h3><p>–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º...</p></div>">{{ .Lesson.TheoryRu }}</textarea>
            </div>

            <hr class="my-6 border-gray-200">

            <div id="tasks-container" class="mb-6">
                <h3 class="text-lg font-bold text-gray-800 mb-4">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤—Ç—ñ –¢–∞–ø—Å—ã—Ä–º–∞–ª–∞—Ä</h3>

                {{ range .Lesson.Tasks }}
                <div class="mb-4 border p-4 rounded bg-gray-50">
                    <div class="grid grid-cols-2 gap-2 mb-2">
                        <div>
                            <label class="block text-gray-700 font-bold mb-1">üá∞üáø –¢–∞–ø—Å—ã—Ä–º–∞ –ê—Ç—ã (“ö–∞–∑–∞“õ—à–∞)</label>
                            <input type="text" name="task_titles[]"
                                class="w-full border p-2 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm"
                                value="{{ .Title }}">
                        </div>
                        <div>
                            <label class="block text-gray-700 font-bold mb-1">üá∑üá∫ –¢–∞–ø—Å—ã—Ä–º–∞ –ê—Ç—ã (–û—Ä—ã—Å—à–∞)</label>
                            <input type="text" name="task_titles_ru[]"
                                class="w-full border p-2 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm"
                                value="{{ .TitleRu }}" placeholder="–û—Ä—ã—Å—à–∞ –∞—Ç–∞—É">
                        </div>
                    </div>
                    <div class="mb-2">
                        <label class="block text-gray-700 font-bold mb-1">üá∞üáø HTML –ö–æ–¥—ã (“ö–∞–∑–∞“õ—à–∞)</label>
                        <textarea name="task_codes[]"
                            class="w-full border p-2 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono text-sm"
                            rows="3">{{ .Code }}</textarea>
                    </div>
                    <div class="mb-2">
                        <label class="block text-gray-700 font-bold mb-1">üá∑üá∫ HTML –ö–æ–¥—ã (–û—Ä—ã—Å—à–∞)</label>
                        <textarea name="task_codes_ru[]"
                            class="w-full border p-2 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono text-sm"
                            rows="3">{{ .CodeRu }}</textarea>
                    </div>
                    <div class="mb-2">
                        <label class="block text-gray-700 font-bold mb-1">üá∑üá∫ –¢–∞–ø—Å—ã—Ä–º–∞ –°–∏–ø–∞—Ç—Ç–∞–º–∞—Å—ã (–û—Ä—ã—Å—à–∞
                            HTML)</label>
                        <textarea name="task_descriptions_ru[]"
                            class="w-full border p-2 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono text-sm"
                            rows="3" placeholder="<p>–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è...</p>">{{ .DescriptionRu }}</textarea>
                    </div>
                    <button type="button" onclick="this.parentElement.remove()"
                        class="text-red-500 text-sm mt-2 hover:underline">–¢–∞–ø—Å—ã—Ä–º–∞–Ω—ã ”®—à—ñ—Ä—É</button>
                </div>
                {{ end }}

                <!-- If no tasks, show one empty one? No, let user add one. -->
            </div>

            <button type="button" onclick="addTask()"
                class="mb-8 bg-indigo-100 text-indigo-700 px-4 py-2 rounded hover:bg-indigo-200 font-medium w-full border-dashed border-2 border-indigo-200">
                + –¢–∞“ì—ã –¢–∞–ø—Å—ã—Ä–º–∞ “ö–æ—Å—É
            </button>

            <button type="submit"
                class="w-full bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700 transition shadow-md">
                –°–∞–±–∞“õ—Ç—ã –ñ–∞“£–∞—Ä—Ç—É
            </button>
        </form>
    </main>

</body>

</html>