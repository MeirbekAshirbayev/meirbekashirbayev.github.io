<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1.6 –°–≤–æ–π—Å—Ç–≤–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π | 1.6 –ê—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞–ª—ã“õ –∞–º–∞–ª–¥–∞—Ä–¥—ã“£ “õ–∞—Å–∏–µ—Ç—Ç–µ—Ä—ñ - –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è | VisualMath
    </title>
    <meta name="description"
        content="1.6 –°–≤–æ–π—Å—Ç–≤–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π - 5 –∫–ª–∞—Å—Å –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞. –ì–æ—Ç–æ–≤–∞—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è (PPT), —Å–ª–∞–π–¥—ã –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è. –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –æ–Ω–ª–∞–π–Ω.">
    <meta name="keywords"
        content="1.6 –°–≤–æ–π—Å—Ç–≤–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π, 1.6 –ê—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞–ª—ã“õ –∞–º–∞–ª–¥–∞—Ä–¥—ã“£ “õ–∞—Å–∏–µ—Ç—Ç–µ—Ä—ñ, 5 –∫–ª–∞—Å—Å, –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è, —Å–ª–∞–π–¥, –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞, —É—Ä–æ–∫">

    
    <link rel="canonical" href="https://meirbekashirbayev.github.io/lesson/7" />

    
    <link rel="amphtml" href="/lesson/7/amp.html">

    
    <meta property="og:type" content="article">
    <meta property="og:title"
        content="1.6 –°–≤–æ–π—Å—Ç–≤–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π - –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è | VisualMath">
    <meta property="og:description"
        content="1.6 –°–≤–æ–π—Å—Ç–≤–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π - 5 –∫–ª–∞—Å—Å –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞. –ì–æ—Ç–æ–≤–∞—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è (PPT) –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è.">

    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Course",
      "name": "1.6 –°–≤–æ–π—Å—Ç–≤–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π",
      "description": "1.6 –°–≤–æ–π—Å—Ç–≤–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π - 1.6 –ê—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞–ª—ã“õ –∞–º–∞–ª–¥–∞—Ä–¥—ã“£ “õ–∞—Å–∏–µ—Ç—Ç–µ—Ä—ñ. 5 –∫–ª–∞—Å—Å –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞. –ì–æ—Ç–æ–≤–∞—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è (PPT), —Å–ª–∞–π–¥—ã –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è.",
      "provider": {
        "@type": "Organization",
        "name": "VisualMath",
        "url": "https://meirbekashirbayev.github.io"
      },
      "educationalLevel": "Grade 5",
      "inLanguage": ["kk", "ru"],
      "learningResourceType": "–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è",
      "teaches": "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞",
      "keywords": "5 –∫–ª–∞—Å—Å –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è, ppt —Å–∫–∞—á–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ, —Å–ª–∞–π–¥—ã, 1.6 –°–≤–æ–π—Å—Ç–≤–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π"
    }
    </script>

    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "–ì–ª–∞–≤–Ω–∞—è",
          "item": "https://meirbekashirbayev.github.io/"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "5-–∫–ª–∞—Å—Å",
          "item": "https://meirbekashirbayev.github.io/grade/5"
        },
        {
          "@type": "ListItem",
          "position": 3,
          "name": "1.6 –°–≤–æ–π—Å—Ç–≤–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π"
        }
      ]
    }
    </script>

    
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìê</text></svg>">

    
    <link rel="preconnect" href="https://www.googletagmanager.com">

    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-E38F1VR05Z"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-E38F1VR05Z');
    </script>

    


    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Inter', sans-serif;
        }

        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .embed-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 16px;
        }

        .embed-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }

        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(102, 126, 234, 0.25);
        }

         
        div[id^="fsContainer"]:fullscreen {
            padding-bottom: 0 !important;
            height: 100vh !important;
            background-color: #f9fafb;
             
            display: flex;
            align-items: center;
            justify-content: center;
        }

         
        div[id^="fsContainer"]:-webkit-full-screen {
            padding-bottom: 0 !important;
            height: 100vh !important;
            background-color: #f9fafb;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        div[id^="fsContainer"]:-ms-fullscreen {
            padding-bottom: 0 !important;
            height: 100vh !important;
            background-color: #f9fafb;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
    
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>

<body class="bg-gray-100 min-h-screen flex flex-col">

    
    <nav class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="/" class="text-2xl font-bold flex items-center gap-2 text-purple-600">
                <span class="text-3xl" role="img" aria-label="–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –≥–µ–æ–º–µ—Ç—Ä–∏—è">üìê</span>
                <span>VisualMath</span>
            </a>
            <div class="flex items-center gap-3">
                <a href="/about"
                    class="flex items-center gap-2 bg-purple-50 hover:bg-purple-100 text-purple-600 px-3 py-2 rounded-lg transition-colors text-sm font-semibold">
                    <span>üíé</span>
                    <span class="hidden md:inline">–û –Ω–∞—Å</span>
                </a>
                <a href="/grade/5"
                    class="flex items-center gap-2 gradient-bg text-white px-4 py-2 rounded-lg hover:opacity-90 transition-opacity">
                    <span>‚Üê</span>
                    <span class="hidden sm:inline">5-–∫–ª–∞—Å—Å</span>
                </a>
            </div>
        </div>
    </nav>

    <main class="container mx-auto px-4 py-8 max-w-4xl flex-grow">

        
        <nav aria-label="Breadcrumb" class="mb-4">
            <ol class="flex items-center gap-2 text-sm text-gray-600">
                <li><a href="/" class="hover:text-purple-600 transition-colors">–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li><span class="text-gray-400">‚Ä∫</span></li>
                <li><a href="/grade/5"
                        class="hover:text-purple-600 transition-colors">5-–∫–ª–∞—Å—Å</a></li>
                <li><span class="text-gray-400">‚Ä∫</span></li>
                <li class="text-gray-800 font-medium">1.6 –°–≤–æ–π—Å—Ç–≤–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π</li>
            </ol>
        </nav>

        
        <div class="mb-8">
            <div class="flex items-center gap-2 text-purple-600 text-sm font-medium mb-2">
                <span>5-–∫–ª–∞—Å—Å</span>
                <span>‚Ä¢</span>
                <span>–£—Ä–æ–∫</span>
            </div>
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900">1.6 –°–≤–æ–π—Å—Ç–≤–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π - 5 –∫–ª–∞—Å—Å –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è</h1>
        </div>

        
        <div class="bg-gradient-to-br from-blue-50 to-purple-50 p-6 rounded-2xl mb-6 border border-purple-200">
            <div class="prose max-w-none">
                <h2 class="text-xl font-bold text-gray-800 mb-2">
                    –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ 5 –∫–ª–∞—Å—Å: 1.6 –°–≤–æ–π—Å—Ç–≤–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π
                </h2>
                <p class="text-gray-700 leading-relaxed mb-4">
                    –ù–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –ø–æ–¥—Ä–æ–±–Ω—ã–π —É—Ä–æ–∫ –ø–æ —Ç–µ–º–µ <strong>"1.6 –°–≤–æ–π—Å—Ç–≤–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π"</strong>, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è
                    —É—á–µ–Ω–∏–∫–æ–≤ 5 –∫–ª–∞—Å—Å–∞.
                    –ú–∞—Ç–µ—Ä–∏–∞–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–π —É—á–µ–±–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞.
                </p>
                <p class="text-gray-700 leading-relaxed mb-4">
                    <strong>–í —ç—Ç–æ–º —É—Ä–æ–∫–µ –≤—ã –Ω–∞–π–¥–µ—Ç–µ:</strong>
                </p>
                <ul class="list-disc pl-5 mb-4 text-gray-700">
                    <li>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é (—Å–ª–∞–π–¥—ã) –ø–æ —Ç–µ–º–µ "1.6 –°–≤–æ–π—Å—Ç–≤–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π" –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ–≥–æ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è.</li>
                    <li><strong>–ë–æ–Ω—É—Å:</strong> –ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è —É—Ä–æ–∫–∞ —Ç–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ –∫–∞–∑–∞—Ö—Å–∫–æ–º —è–∑—ã–∫–µ ("1.6 –ê—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞–ª—ã“õ –∞–º–∞–ª–¥–∞—Ä–¥—ã“£ “õ–∞—Å–∏–µ—Ç—Ç–µ—Ä—ñ").</li>
                    <li>–†–∞–∑–±–æ—Ä –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–æ–Ω—è—Ç–∏–π –∏ —Ñ–æ—Ä–º—É–ª, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è –æ—Å–≤–æ–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞ 5 –∫–ª–∞—Å—Å–∞.
                    </li>
                    <li>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è –¥–ª—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–≥–æ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è —Ç–µ–º—ã.</li>
                </ul>
                <p class="text-gray-700 leading-relaxed">
                    –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤—ã—Ö –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π VisualMath –ø–æ–∑–≤–æ–ª—è–µ—Ç —É—á–∏—Ç–µ–ª—é —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –∫
                    –∑–∞–Ω—è—Ç–∏—è–º, –∞ —É—á–µ–Ω–∏–∫–∞–º ‚Äî –≥–ª—É–±–∂–µ –ø–æ–Ω—è—Ç—å —Ç–µ–º—É <em>"1.6 –°–≤–æ–π—Å—Ç–≤–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π"</em> —á–µ—Ä–µ–∑ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã.
                </p>
            </div>
        </div>

        
        
        <div class="grid md:grid-cols-2 gap-6 mb-8">
            
            <div>
                <h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-4">1.6 –ê—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞–ª—ã“õ –∞–º–∞–ª–¥–∞—Ä–¥—ã“£ “õ–∞—Å–∏–µ—Ç—Ç–µ—Ä—ñ</h2>
                <div class="bg-white p-4 md:p-6 rounded-2xl shadow-lg">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-10 h-10 gradient-bg rounded-xl flex items-center justify-center" role="img"
                            aria-label="–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è –∏–∫–æ–Ω–∫–∞—Å—ã">
                            <span class="text-white text-lg" role="img" aria-label="–°–ª–∞–π–¥—ã">üìä</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800"><span role="img"
                                aria-label="“ö–∞–∑–∞“õ—Å—Ç–∞–Ω —Ç—ñ–ª—ñ">üá∞üáø</span> –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è (“ö–∞–∑–∞“õ—à–∞)</h3>
                    </div>
                    <div class="embed-container">
                        <iframe loading="lazy" src="https://www.canva.com/design/DAG5WbsdR98/ry2fUOW_ywEGGZe0Tlx1qg/view?embed" allowfullscreen="allowfullscreen"
                            allow="fullscreen"></iframe>
                    </div>
                </div>
            </div>

            
            <div>
                <h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-4">1.6 –°–≤–æ–π—Å—Ç–≤–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π</h2>
                <div class="bg-white p-4 md:p-6 rounded-2xl shadow-lg">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-10 h-10 gradient-bg rounded-xl flex items-center justify-center" role="img"
                            aria-label="–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è –∏–∫–æ–Ω–∫–∞—Å—ã">
                            <span class="text-white text-lg" role="img" aria-label="–°–ª–∞–π–¥—ã">üìä</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800"><span role="img"
                                aria-label="–†—É—Å—Å–∫–∏–π —è–∑—ã–∫">üá∑üá∫</span> –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è (–†—É—Å—Å–∫–∏–π)</h3>
                    </div>
                    <div class="embed-container">
                        <iframe loading="lazy" src="https://www.canva.com/design/DAG8cGqnpL0/8ZmJU7GHiJeB-12w9zo7Ng/view?embed" allowfullscreen="allowfullscreen"
                            allow="fullscreen"></iframe>
                    </div>
                </div>
            </div>
        </div>
        

        
        
        <div class="bg-gradient-to-br from-blue-50 to-indigo-50 p-4 rounded-xl mb-6 border border-blue-200 shadow-sm">
            <div class="flex items-center gap-2 mb-3">
                <div
                    class="w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center">
                    <span class="text-white text-sm">üìö</span>
                </div>
                <h2 class="text-lg font-bold text-gray-800">–¢–µ–æ—Ä–∏—è / –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è</h2>
            </div>
            <div class="prose prose-sm prose-blue max-w-none text-gray-700">
                
<div class="space-y-6">
    <div class="bg-gray-50 p-6 rounded-xl border-l-4 border-gray-600 shadow-sm">
        <h3 class="font-bold text-xl text-gray-800 mb-4">1.6 –°–≤–æ–π—Å—Ç–≤–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π</h3>
        <p class="text-gray-700 mb-4">
            –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ —Å–ª–æ–∂–µ–Ω–∏—è –∏ —É–º–Ω–æ–∂–µ–Ω–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∏ —Ä–µ—à–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã –±—ã—Å—Ç—Ä–µ–µ (—Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –≤—ã—á–∏—Å–ª–µ–Ω–∏—è).
        </p>

        <h4 class="font-bold text-gray-700 mb-2">–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å–ª–∞–≥–∞–µ–º—ã—Ö</h4>
        <p class="text-gray-700 mb-4">
            –ü—Ä–∏ —Å–ª–æ–∂–µ–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —á–∏—Å–µ–ª –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –∏—Ö –º–µ—Å—Ç–∞–º–∏ –∏ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –≤ –≥—Ä—É–ø–ø—ã —Ç–∞–∫, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å "–∫—Ä—É–≥–ª—ã–µ" —á–∏—Å–ª–∞.
            <br>
            <em>–ü—Ä–∏–º–µ—Ä:</em> 37 + 18 + 23 + 42 = (37 + 23) + (18 + 42) = 60 + 60 = 120.
        </p>

        <h4 class="font-bold text-gray-700 mb-2">–í—ã–Ω–µ—Å–µ–Ω–∏–µ –º–Ω–æ–∂–∏—Ç–µ–ª—è –∑–∞ —Å–∫–æ–±–∫–∏</h4>
        <p class="text-gray-700 mb-4">
            –û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ–ª—å–Ω–æ–º —Å–≤–æ–π—Å—Ç–≤–µ —É–º–Ω–æ–∂–µ–Ω–∏—è: <span class="font-mono">ac + bc = c(a + b)</span>.
            <br>
            <em>–ü—Ä–∏–º–µ—Ä:</em> 54 ¬∑ 12 + 54 ¬∑ 88 = ? 
            <br>
            –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã —É–º–Ω–æ–∂–∞—Ç—å –¥–≤–∞–∂–¥—ã, –≤—ã–Ω–µ—Å–µ–º 54 –∑–∞ —Å–∫–æ–±–∫—É:
            <br>
            54 ¬∑ (12 + 88) = 54 ¬∑ 100 = 5400.
        </p>

        <h4 class="font-bold text-gray-700 mb-2">–£–º–Ω–æ–∂–µ–Ω–∏–µ –Ω–∞ 5, 25, 50</h4>
        <ul class="list-disc list-inside text-gray-700 space-y-2 mb-4">
            <li>–ß—Ç–æ–±—ã —É–º–Ω–æ–∂–∏—Ç—å —á–∏—Å–ª–æ <strong>–Ω–∞ 5</strong>, –º–æ–∂–Ω–æ —É–º–Ω–æ–∂–∏—Ç—å –µ–≥–æ –Ω–∞ 10 –∏ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ 2.</li>
            <li>–ß—Ç–æ–±—ã —É–º–Ω–æ–∂–∏—Ç—å —á–∏—Å–ª–æ <strong>–Ω–∞ 25</strong>, –º–æ–∂–Ω–æ —É–º–Ω–æ–∂–∏—Ç—å –µ–≥–æ –Ω–∞ 100 –∏ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ 4.</li>
            <li>–ß—Ç–æ–±—ã —É–º–Ω–æ–∂–∏—Ç—å —á–∏—Å–ª–æ <strong>–Ω–∞ 50</strong>, –º–æ–∂–Ω–æ —É–º–Ω–æ–∂–∏—Ç—å –µ–≥–æ –Ω–∞ 100 –∏ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ 2.</li>
        </ul>
        <p class="text-gray-700">
            <em>–ü—Ä–∏–º–µ—Ä:</em> 16 ¬∑ 25 = (16 ¬∑ 100) : 4 = 1600 : 4 = 400.
        </p>
    </div>
</div>
            </div>
        </div>
        

        
        <div class="mb-6">
            <button onclick="toggleMethodology()"
                class="w-full bg-gradient-to-r from-indigo-50 to-purple-50 hover:from-indigo-100 hover:to-purple-100 p-4 rounded-xl border-2 border-indigo-200 transition-all flex items-center justify-between group">
                <div class="flex items-center gap-3">
                    <div
                        class="w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center">
                        <span class="text-white text-lg">üë®‚Äçüè´</span>
                    </div>
                    <span class="text-lg font-bold text-gray-800">–ú–µ—Ç–æ–¥–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —É—á–∏—Ç–µ–ª–µ–π</span>
                </div>
                <svg id="methodologyIcon" class="w-6 h-6 text-indigo-600 transform transition-transform" fill="none"
                    stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>

            <div id="methodologyContent" class="hidden mt-3 bg-white p-6 rounded-xl border border-indigo-200 shadow-sm">
                <div class="prose prose-sm max-w-none text-gray-700">
                    <h3 class="text-lg font-bold text-gray-800 mb-3">üìã –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã —É—Ä–æ–∫–∞</h3>

                    <p><strong>–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏:</strong> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–ª–∞–π–¥—ã –¥–ª—è –æ–±—ä—è—Å–Ω–µ–Ω–∏—è —Ç–µ–º—ã. –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏
                        –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –¥–≤—É—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö ‚Äî –Ω–∞ –∫–∞–∑–∞—Ö—Å–∫–æ–º –∏ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–∞—Ö. –í—ã –º–æ–∂–µ—Ç–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏—Ö –∫–∞–∫ –≤
                        –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ, —Ç–∞–∫ –∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ.</p>

                    <p><strong>–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π –±–ª–æ–∫:</strong> –ö–ª—é—á–µ–≤—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, —Ñ–æ—Ä–º—É–ª—ã –∏ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –≤
                        —É–¥–æ–±–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º —Å–Ω–∞—á–∞–ª–∞ –æ–±—ä—è—Å–Ω–∏—Ç—å —Ç–µ–æ—Ä–∏—é —Å –ø–æ–º–æ—â—å—é
                        –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏, –∞ –∑–∞—Ç–µ–º –∑–∞–∫—Ä–µ–ø–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è —Å —É—á–µ–Ω–∏–∫–∞–º–∏.</p>

                    <p><strong>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è:</strong> –ü–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è —Ç–µ–æ—Ä–∏–∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç–µ —É—á–µ–Ω–∏–∫–∞–º –≤—ã–ø–æ–ª–Ω–∏—Ç—å
                        –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è. –û–Ω–∏ –æ—Ç–∫—Ä–æ—é—Ç—Å—è –≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã. –ó–∞–¥–∞–Ω–∏—è –ø–æ–º–æ–≥–∞—é—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
                        –ø–æ–Ω–∏–º–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –∏ —Ä–∞–∑–≤–∏–≤–∞—é—Ç –Ω–∞–≤—ã–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∑–Ω–∞–Ω–∏–π.</p>

                    <p><strong>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —É—Ä–æ–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è):</strong></p>
                    <ul>
                        <li>5-7 –º–∏–Ω—É—Ç ‚Äî –≤–≤–µ–¥–µ–Ω–∏–µ –≤ —Ç–µ–º—É —Å –ø–æ–º–æ—â—å—é –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏</li>
                        <li>15-20 –º–∏–Ω—É—Ç ‚Äî –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ç–µ–æ—Ä–∏–∏ –∏ —Ä–∞–∑–±–æ—Ä –ø—Ä–∏–º–µ—Ä–æ–≤</li>
                        <li>10-15 –º–∏–Ω—É—Ç ‚Äî —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∑–∞–¥–∞–Ω–∏—è–º–∏</li>
                        <li>5-8 –º–∏–Ω—É—Ç ‚Äî –æ–±—Å—É–∂–¥–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã</li>
                    </ul>


                    <p><strong>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:</strong> –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–π –∫–æ–ø–∏–∏ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
                        Canva.com
                        (–¥—É–±–ª–∏–∫–∞—Ç –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ –¥–ª—è –ª–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è) —Å—Ç–æ–∏–º–æ—Å—Ç—å —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 2000 —Ç–≥.
                        –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å—Å—ã–ª–∫–æ–π —Å –∫–æ–ª–ª–µ–≥–∞–º–∏ —á–µ—Ä–µ–∑ WhatsApp –∏–ª–∏ Telegram ‚Äî —ç—Ç–æ –ø–æ–º–æ–∂–µ—Ç –¥—Ä—É–≥–∏–º —É—á–∏—Ç–µ–ª—è–º
                        –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫
                        –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º.</p>
                </div>
            </div>
        </div>

        <script>
            function toggleMethodology() {
                const content = document.getElementById('methodologyContent');
                const icon = document.getElementById('methodologyIcon');
                content.classList.toggle('hidden');
                icon.classList.toggle('rotate-180');
            }
        </script>



        
        
        <div class="mb-8">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 gradient-bg rounded-xl flex items-center justify-center">
                    <span class="text-white text-lg">üéÆ</span>
                </div>
                <h2 class="text-2xl font-bold text-gray-800">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è</h2>
            </div>

            <div class="space-y-8">
                
                
                <div class="mb-4">
                    <h3 class="text-xl font-bold text-gray-900 text-center">–°–≤–æ–π—Å—Ç–≤–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ç—Ä–µ–Ω–∞–∂–µ—Ä</h3>
                </div>

                
                <div class="grid md:grid-cols-2 gap-6">
                    
                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden border-2 border-purple-200">
                        
                        <div class="bg-gradient-to-r from-blue-500 to-cyan-600 p-3">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2">
                                    <span class="text-2xl">üá∞üáø</span>
                                    <h4 class="text-lg font-bold text-white">“ö–∞–∑–∞“õ—à–∞</h4>
                                </div>
                                <button onclick="openTaskFullscreen('137', 'kz')"
                                    class="flex items-center gap-2 bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-3 py-1.5 rounded-lg transition-all transform hover:scale-105">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4">
                                        </path>
                                    </svg>
                                    <span class="hidden lg:inline text-sm">–¢–æ–ª—ã“õ —ç–∫—Ä–∞–Ω</span>
                                </button>
                            </div>
                        </div>

                        
                        <div id="fsContainer137" class="relative bg-gray-50 group"
                            style="padding-bottom: 75%; height: 0;">
                            <iframe id="taskFrame137" srcdoc="&lt;!DOCTYPE html&gt;
&lt;html lang=&#34;kk&#34;&gt;
&lt;head&gt;
    &lt;meta charset=&#34;UTF-8&#34;&gt;
    &lt;meta name=&#34;viewport&#34; content=&#34;width=device-width, initial-scale=1.0&#34;&gt;
    &lt;title&gt;–ê—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞–ª—ã“õ –∞–º–∞–ª–¥–∞—Ä–¥—ã“£ “õ–∞—Å–∏–µ—Ç—Ç–µ—Ä—ñ: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤—Ç—ñ –ª–æ–≥–∏–∫–∞–ª—ã“õ –∂–∞—Ç—Ç—ã“õ—Ç—ã—Ä“ì—ã—à&lt;/title&gt;
    &lt;!-- Tailwind CSS for styling --&gt;
    &lt;script src=&#34;https://cdn.tailwindcss.com&#34;&gt;&lt;/script&gt;
    &lt;!-- Lucide Icons --&gt;
    &lt;script src=&#34;https://unpkg.com/lucide@latest&#34;&gt;&lt;/script&gt;
    &lt;style&gt;
        .animate-fadeIn { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .transition-all { transition-property: all; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 300ms; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body class=&#34;min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 font-sans text-slate-800 p-4&#34;&gt;

    &lt;!-- Main Container --&gt;
    &lt;div id=&#34;app-container&#34; class=&#34;max-w-4xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden min-h-[600px] flex flex-col relative&#34;&gt;
        &lt;!-- Header --&gt;
        &lt;header class=&#34;bg-indigo-600 p-4 text-white flex justify-between items-center shadow-md z-10&#34;&gt;
            &lt;div class=&#34;flex items-center gap-2&#34;&gt;
                &lt;i data-lucide=&#34;brain&#34; class=&#34;w-8 h-8&#34;&gt;&lt;/i&gt;
                &lt;h1 class=&#34;text-xl md:text-2xl font-bold&#34;&gt;–ê—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞–ª—ã“õ –∞–º–∞–ª–¥–∞—Ä–¥—ã“£ “õ–∞—Å–∏–µ—Ç—Ç–µ—Ä—ñ&lt;/h1&gt;
            &lt;/div&gt;
            &lt;button id=&#34;menu-btn&#34; class=&#34;hidden text-sm bg-indigo-500 hover:bg-indigo-400 px-3 py-1 rounded transition&#34;&gt;
                –ë–∞—Å—Ç—ã –º”ô–∑—ñ—Ä
            &lt;/button&gt;
        &lt;/header&gt;

        &lt;!-- Dynamic Content Area --&gt;
        &lt;main id=&#34;main-content&#34; class=&#34;flex-grow p-4 md:p-6 overflow-y-auto&#34;&gt;
            &lt;!-- Content rendered by JS --&gt;
        &lt;/main&gt;
        
        &lt;!-- Footer --&gt;
        &lt;footer class=&#34;bg-slate-50 p-3 text-center text-slate-500 text-sm border-t&#34;&gt;
            –°—ã–Ω–∏ –æ–π–ª–∞—É –º–µ–Ω –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞–ª—ã“õ –∞–º–∞–ª–¥–∞—Ä–¥—ã“£ “õ–∞—Å–∏–µ—Ç—Ç–µ—Ä—ñ–Ω –¥–∞–º—ã—Ç—É “õ“±—Ä–∞–ª—ã
        &lt;/footer&gt;
    &lt;/div&gt;

    &lt;!-- JavaScript Logic --&gt;
    &lt;script&gt;
        // --- State Management ---
        const state = {
            currentSection: &#39;menu&#39;,
            
            // Smart Grouping State
            grouping: {
                level: 0,
                selectedIds: [],
                matchedGroups: [], // {ids: [], color: &#39;&#39;}
                message: null,
                completed: false
            },

            // Error Hunt State
            errorHunt: {
                problemIndex: 0,
                feedback: null
            },

            // Logic Balance State
            balance: {
                level: 0,
                boxes: [],
                feedback: null,
                completed: false
            },

            // Quiz State
            quiz: {
                questionIndex: 0,
                score: 0,
                selectedOption: null,
                isAnswered: false,
                completed: false
            }
        };

        // --- Data ---
        const groupingLevels = [
            { target: 100, numbers: [{id:1, val:44}, {id:2, val:78}, {id:3, val:56}, {id:4, val:22}], hint: &#34;“ö–æ—Å—ã–Ω–¥—ã—Å—ã 100 –±–æ–ª–∞—Ç—ã–Ω —Å–∞–Ω–¥–∞—Ä–¥—ã –∂“±–ø—Ç–∞! (4&#43;6=10, 8&#43;2=10)&#34; },
            { target: 1000, isPartialSum: true, numbers: [{id:1, val:145}, {id:2, val:280}, {id:3, val:55}, {id:4, val:20}], hint: &#34;“ö–æ—Å—É–¥—ã“£ –∞—É—ã—Å—Ç—ã—Ä—ã–º–¥—ã–ª—ã“õ “õ–∞—Å–∏–µ—Ç—ñ: “ö–æ–ª–∞–π–ª—ã —Å–∞–Ω–¥–∞—Ä–¥—ã —ñ–∑–¥–µ (5-–ø–µ–Ω –∞—è“õ—Ç–∞–ª–∞—Ç—ã–Ω, 0-–º–µ–Ω –∞—è“õ—Ç–∞–ª–∞—Ç—ã–Ω)&#34; },
            { target: 100, isMult: true, numbers: [{id:1, val:5}, {id:2, val:25}, {id:3, val:20}, {id:4, val:4}], hint: &#34;–ö”©–±–µ–π—Ç—ñ–Ω–¥—ñ—Å—ñ 100 –±–æ–ª–∞—Ç—ã–Ω –∂“±–ø—Ç–∞—Ä–¥—ã —Ç–∞–ø!&#34; },
            { target: 100, isDistributive: true, numbers: [{id:1, val:28}, {id:2, val:72}, {id:3, val:35}, {id:4, val:65}], hint: &#34;–ñ–∞“õ—à–∞ —ñ—à—ñ–Ω–¥–µ “õ–æ—Å—ã–Ω–¥—ã—Å—ã 100 –±–æ–ª–∞—Ç—ã–Ω —Å–∞–Ω–¥–∞—Ä–¥—ã –∂“±–ø—Ç–∞ (–û—Ä—Ç–∞“õ –∫”©–±–µ–π—Ç–∫—ñ—à —Å—ã—Ä—Ç—Ç–∞ —Ç“±—Ä –¥–µ–ø –µ–ª–µ—Å—Ç–µ—Ç)&#34; }
        ];

        const errorHuntProblems = [
            { title: &#34;–ê—Å“õ–∞—Ä–¥—ã“£ –µ—Å–µ–±—ñ&#34;, expression: &#34;25 &#43; 18 &#43; 75&#34;, steps: [ { id: 1, text: &#34;25 &#43; 18 &#43; 75&#34;, status: &#39;correct&#39; }, { id: 2, text: &#34;= (25 &#43; 75) &#43; 18&#34;, status: &#39;correct&#39;, reason: &#34;–î“±—Ä—ã—Å! “ö–æ—Å—É–¥—ã“£ –∞—É—ã—Å—Ç—ã—Ä—ã–º–¥—ã–ª—ã“õ “õ–∞—Å–∏–µ—Ç—ñ “õ–æ–ª–¥–∞–Ω—ã–ª–¥—ã.&#34; }, { id: 3, text: &#34;= 100 &#43; 18&#34;, status: &#39;correct&#39; }, { id: 4, text: &#34;= 118&#34;, status: &#39;correct&#39; } ], question: &#34;–ë“±–ª –µ—Å–µ–ø –¥“±—Ä—ã—Å –ø–∞?&#34;, options: [&#34;–ò”ô, –±”ô—Ä—ñ –¥“±—Ä—ã—Å&#34;, &#34;–ñ–æ“õ, “õ–∞—Ç–µ –±–∞—Ä&#34;], correctAnswer: &#34;–ò”ô, –±”ô—Ä—ñ –¥“±—Ä—ã—Å&#34; },
            { title: &#34;–ì“Ø–ª–Ω–∞–∑–¥—ã“£ “õ–∞—Ç–µ—Å—ñ–Ω —Ç–∞–ø&#34;, expression: &#34;8 ‚Ä¢ (10 &#43; 2)&#34;, steps: [ { id: 1, text: &#34;8 ‚Ä¢ (10 &#43; 2)&#34;, status: &#39;correct&#39; }, { id: 2, text: &#34;= 8 ‚Ä¢ 10 &#43; 2&#34;, status: &#39;error&#39;, reason: &#34;“ö–∞—Ç–µ! “Æ–ª–µ—Å—Ç—ñ—Ä—ñ–º–¥—ñ–ª—ñ–∫ “õ–∞—Å–∏–µ—Ç—ñ –±–æ–π—ã–Ω—à–∞ 8 —Å–∞–Ω—ã –∂–∞“õ—à–∞ —ñ—à—ñ–Ω–¥–µ–≥—ñ ”ò–†–ë–Ü–† —Å–∞–Ω“ì–∞ –∫”©–±–µ–π—Ç—ñ–ª—É—ñ –∫–µ—Ä–µ–∫: 8‚Ä¢10 &#43; 8‚Ä¢2&#34; }, { id: 3, text: &#34;= 80 &#43; 2&#34;, status: &#39;neutral&#39; }, { id: 4, text: &#34;= 82&#34;, status: &#39;neutral&#39; } ], isInteractiveSteps: true, instruction: &#34;“ö–∞–π “õ–∞—Ç–∞—Ä–¥–∞ “õ–∞—Å–∏–µ—Ç –¥“±—Ä—ã—Å “õ–æ–ª–¥–∞–Ω—ã–ª–º–∞“ì–∞–Ω? “ö–∞—Ç–µ “õ–∞—Ç–∞—Ä–¥—ã –±–∞—Å—ã“£—ã–∑.&#34; },
            { title: &#34;–ú“±—Ä–∞—Ç—Ç—ã“£ –µ—Å–µ–±—ñ&#34;, expression: &#34;(18 - 9) ‚Ä¢ 2&#34;, steps: [ { id: 1, text: &#34;(18 - 9) ‚Ä¢ 2&#34;, status: &#39;correct&#39; }, { id: 2, text: &#34;= 18 ‚Ä¢ 2 - 9 ‚Ä¢ 2&#34;, status: &#39;correct&#39;, reason: &#34;–î“±—Ä—ã—Å! –ö”©–±–µ–π—Ç—É–¥—ñ“£ –∞–∑–∞–π—Ç—É“ì–∞ “õ–∞—Ç—ã—Å—Ç—ã “Ø–ª–µ—Å—Ç—ñ—Ä—ñ–º–¥—ñ–ª—ñ–∫ “õ–∞—Å–∏–µ—Ç—ñ.&#34; }, { id: 3, text: &#34;= 36 - 18&#34;, status: &#39;correct&#39; }, { id: 4, text: &#34;= 28&#34;, status: &#39;error&#39;, reason: &#34;“ö–∞—Ç–µ! –ê—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞–ª—ã“õ “õ–∞—Ç–µ: 36 - 18 = 18 –±–æ–ª—É—ã –∫–µ—Ä–µ–∫.&#34; } ], isInteractiveSteps: true, instruction: &#34;“ö–∞–π “õ–∞—Ç–∞—Ä–¥–∞ “õ–∞—Ç–µ –±–∞—Ä? (–ù–∞–∑–∞—Ä –∞—É–¥–∞—Ä: “õ–∞—Ç–µ “õ–∞—Å–∏–µ—Ç—Ç–µ –º–µ, ”ô–ª–¥–µ –µ—Å–µ–ø—Ç–µ—É–¥–µ –º–µ?)&#34; }
        ];

        const balanceLevels = [
            { id: 0, title: &#34;1-–¥–µ“£–≥–µ–π: –û“£–∞–π –±–∞—Å—Ç–∞–º–∞&#34;, desc: &#34;–ï–∫—ñ “õ–æ—Ä–∞–ø—Ç–∞“ì—ã –∞–ª–º–∞ —Å–∞–Ω—ã–Ω —Ç–µ“£–µ—Å—Ç—ñ—Ä.&#34;, initial: [15, 5], target: [10, 10], boxCount: 2 },
            { id: 1, title: &#34;2-–¥–µ“£–≥–µ–π: –Ü—Ä—ñ —Å–∞–Ω–¥–∞—Ä&#34;, desc: &#34;–ë“±–ª –∂–æ–ª—ã —Å–∞–Ω–¥–∞—Ä —Å”ô–ª “Ø–ª–∫–µ–Ω—ñ—Ä–µ–∫. “ö–∞–π –∂–∞“õ—Ç–∞–Ω “õ–∞–Ω—à–∞ –∞–ª—É –∫–µ—Ä–µ–∫?&#34;, initial: [28, 12], target: [20, 20], boxCount: 2 },
            { id: 2, title: &#34;3-–¥–µ“£–≥–µ–π: “Æ—à —ã–¥—ã—Å&#34;, desc: &#34;–û“õ—É–ª—ã“õ—Ç–∞“ì—ã –µ—Å–µ–ø–∫–µ “±“õ—Å–∞—Å: “Æ—à —ã–¥—ã—Å—Ç–∞“ì—ã –∞–ª–º–∞ —Å–∞–Ω—ã–Ω —Ç–µ“£ “õ—ã–ª.&#34;, initial: [10, 25, 10], target: [15, 15, 15], boxCount: 3 }
        ];

        const quizQuestions = [
            {
                question: &#34;(25 ‚Ä¢ 4) ‚Ä¢ 5 = 25 ‚Ä¢ (4 ‚Ä¢ 5) —Ç–µ“£–¥—ñ–≥—ñ–Ω–¥–µ –∫”©–±–µ–π—Ç—É–¥—ñ“£ “õ–∞–Ω–¥–∞–π “õ–∞—Å–∏–µ—Ç—ñ “õ–æ–ª–¥–∞–Ω—ã–ª“ì–∞–Ω?&#34;,
                options: [&#34;–ê—É—ã—Å—Ç—ã—Ä—ã–º–¥—ã–ª—ã“õ&#34;, &#34;–¢–µ—Ä—ñ–º–¥—ñ–ª—ñ–∫&#34;, &#34;“Æ–ª–µ—Å—Ç—ñ—Ä—ñ–º–¥—ñ–ª—ñ–∫&#34;, &#34;–ê–∑–∞–π—Ç—É&#34;],
                correct: 1
            },
            {
                question: &#34;18 ‚Ä¢ 5 &#43; 2 ‚Ä¢ 5 ”©—Ä–Ω–µ–≥—ñ–Ω —Ç–∏—ñ–º–¥—ñ –µ—Å–µ–ø—Ç–µ—É –∂–æ–ª—ã “õ–∞–Ω–¥–∞–π?&#34;,
                options: [&#34;(18 &#43; 2) ‚Ä¢ 5&#34;, &#34;18 ‚Ä¢ 5 &#43; 10&#34;, &#34;18 ‚Ä¢ (5 &#43; 5)&#34;, &#34;20 ‚Ä¢ 10&#34;],
                correct: 0
            },
            {
                question: &#34;–ö”©–±–µ–π—Ç—É–¥—ñ“£ –∞–∑–∞–π—Ç—É“ì–∞ “õ–∞—Ç—ã—Å—Ç—ã “Ø–ª–µ—Å—Ç—ñ—Ä—ñ–º–¥—ñ–ª—ñ–∫ “õ–∞—Å–∏–µ—Ç—ñ–Ω —Ç–∞–ø:&#34;,
                options: [&#34;(a &#43; b) ‚Ä¢ c = ac &#43; bc&#34;, &#34;(a ‚Ä¢ b) ‚Ä¢ c = a ‚Ä¢ (b ‚Ä¢ c)&#34;, &#34;(a - b) ‚Ä¢ c = ac - bc&#34;, &#34;a ‚Ä¢ b = b ‚Ä¢ a&#34;],
                correct: 2
            },
            {
                question: &#34;36 &#43; 89 &#43; 64 “õ–æ—Å—ã–Ω–¥—ã—Å—ã–Ω –µ“£ —Ç–∏—ñ–º–¥—ñ –µ—Å–µ–ø—Ç–µ—É “Ø—à—ñ–Ω —Å–∞–Ω–¥–∞—Ä–¥—ã “õ–∞–ª–∞–π —Ç–æ–ø—Ç–∞—Å—Ç—ã—Ä–∞–º—ã–∑?&#34;,
                options: [&#34;(36 &#43; 89) &#43; 64&#34;, &#34;(36 &#43; 64) &#43; 89&#34;, &#34;(89 &#43; 64) &#43; 36&#34;, &#34;–†–µ—Ç—ñ –º–∞“£—ã–∑–¥—ã –µ–º–µ—Å&#34;],
                correct: 1
            },
            {
                question: &#34;–ñ–∞—è—É –∞–¥–∞–º 5 –∫–º/—Å–∞“ì, –∞–ª –≤–µ–ª–æ—Å–∏–ø–µ–¥—à—ñ –æ–¥–∞–Ω 3 –µ—Å–µ –∂—ã–ª–¥–∞–º –∂“Ø—Ä—Å–µ, –≤–µ–ª–æ—Å–∏–ø–µ–¥—à—ñ–Ω—ñ“£ –∂—ã–ª–¥–∞–º–¥—ã“ì—ã “õ–∞–Ω–¥–∞–π?&#34;,
                options: [&#34;8 –∫–º/—Å–∞“ì&#34;, &#34;15 –∫–º/—Å–∞“ì&#34;, &#34;12 –∫–º/—Å–∞“ì&#34;, &#34;20 –∫–º/—Å–∞“ì&#34;],
                correct: 1
            },
            // –ñ–∞“£–∞ —Å“±—Ä–∞“õ—Ç–∞—Ä
            {
                question: &#34;“ö–æ—Å—É–¥—ã“£ –∞—É—ã—Å—Ç—ã—Ä—ã–º–¥—ã–ª—ã“õ “õ–∞—Å–∏–µ—Ç—ñ–Ω—ñ“£ —Ñ–æ—Ä–º—É–ª–∞—Å—ã “õ–∞–Ω–¥–∞–π?&#34;,
                options: [&#34;(a &#43; b) &#43; c = a &#43; (b &#43; c)&#34;, &#34;a &#43; b = b &#43; a&#34;, &#34;a(b &#43; c) = ab &#43; ac&#34;, &#34;a ‚Ä¢ b = b ‚Ä¢ a&#34;],
                correct: 1
            },
            {
                question: &#34;4(x &#43; 5) ”©—Ä–Ω–µ–≥—ñ–Ω –∂–∞“õ—à–∞–Ω—ã –∞—à—ã–ø –∂–∞–∑:&#34;,
                options: [&#34;4x &#43; 5&#34;, &#34;4x &#43; 9&#34;, &#34;4x &#43; 20&#34;, &#34;x &#43; 20&#34;],
                correct: 2
            },
            {
                question: &#34;–ï–≥–µ—Ä 3 “õ–æ—Ä–∞–ø—Ç–∞ –±–∞—Ä–ª—ã“ì—ã 30 –∞–ª–º–∞ –±–æ–ª—Å–∞ –∂”ô–Ω–µ –æ–ª–∞—Ä —Ç–µ“£ –±”©–ª—ñ–Ω–≥–µ–Ω –±–æ–ª—Å–∞, ”ô—Ä “õ–æ—Ä–∞–ø—Ç–∞ “õ–∞–Ω—à–∞ –∞–ª–º–∞ –±–∞—Ä?&#34;,
                options: [&#34;5&#34;, &#34;15&#34;, &#34;10&#34;, &#34;3&#34;],
                correct: 2
            },
            {
                question: &#34;25 ‚Ä¢ 13 ‚Ä¢ 4 ”©—Ä–Ω–µ–≥—ñ–Ω –µ“£ —Ç–∏—ñ–º–¥—ñ —Ç”ô—Å—ñ–ª–º–µ–Ω “õ–∞–ª–∞–π –µ—Å–µ–ø—Ç–µ–π–º—ñ–∑?&#34;,
                options: [&#34;(25 ‚Ä¢ 4) ‚Ä¢ 13&#34;, &#34;25 ‚Ä¢ (13 ‚Ä¢ 4)&#34;, &#34;(25 ‚Ä¢ 13) ‚Ä¢ 4&#34;, &#34;–†–µ—Ç—ñ–º–µ–Ω –∫”©–±–µ–π—Ç–µ–º—ñ–∑&#34;],
                correct: 0
            },
            {
                question: &#34;5 ‚Ä¢ 34 ”©—Ä–Ω–µ–≥—ñ–Ω “Ø–ª–µ—Å—Ç—ñ—Ä—ñ–º–¥—ñ–ª—ñ–∫ “õ–∞—Å–∏–µ—Ç—ñ–Ω “õ–æ–ª–¥–∞–Ω—ã–ø “õ–∞–ª–∞–π –∂–∞–∑—É“ì–∞ –±–æ–ª–∞–¥—ã?&#34;,
                options: [&#34;5 ‚Ä¢ (30 &#43; 4)&#34;, &#34;5 ‚Ä¢ 30 &#43; 4&#34;, &#34;5 &#43; 34&#34;, &#34;30 ‚Ä¢ (5 &#43; 4)&#34;],
                correct: 0
            }
        ];

        const pairColors = [
            &#39;bg-emerald-100 border-emerald-500 text-emerald-800&#39;, 
            &#39;bg-sky-100 border-sky-500 text-sky-800&#39;,             
            &#39;bg-amber-100 border-amber-500 text-amber-800&#39;,       
            &#39;bg-purple-100 border-purple-500 text-purple-800&#39;     
        ];

        // --- Core Functions ---

        function render() {
            const mainContent = document.getElementById(&#39;main-content&#39;);
            const menuBtn = document.getElementById(&#39;menu-btn&#39;);
            
            // Toggle Menu Button
            if (state.currentSection === &#39;menu&#39;) {
                menuBtn.classList.add(&#39;hidden&#39;);
            } else {
                menuBtn.classList.remove(&#39;hidden&#39;);
                menuBtn.onclick = () =&gt; { state.currentSection = &#39;menu&#39;; render(); };
            }

            mainContent.innerHTML = &#39;&#39;; // Clear content

            switch (state.currentSection) {
                case &#39;menu&#39;: renderMenu(mainContent); break;
                case &#39;grouping&#39;: renderGrouping(mainContent); break;
                case &#39;error-hunt&#39;: renderErrorHunt(mainContent); break;
                case &#39;logic-balance&#39;: renderLogicBalance(mainContent); break;
                case &#39;quiz&#39;: renderQuiz(mainContent); break;
            }
            
            // Re-initialize icons
            lucide.createIcons();
        }

        // --- Menu Section ---
        function renderMenu(container) {
            const menuHtml = `
                &lt;div class=&#34;flex flex-col items-center justify-center h-full gap-8 animate-fadeIn&#34;&gt;
                    &lt;div class=&#34;text-center max-w-lg&#34;&gt;
                        &lt;h2 class=&#34;text-3xl font-bold text-indigo-800 mb-4&#34;&gt;–°”ô–ª–µ–º, –∂–∞—Å –º–∞—Ç–µ–º–∞—Ç–∏–∫!&lt;/h2&gt;
                        &lt;p class=&#34;text-slate-600 text-lg&#34;&gt;–ê—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞–ª—ã“õ –∞–º–∞–ª–¥–∞—Ä–¥—ã“£ “õ–∞—Å–∏–µ—Ç—Ç–µ—Ä—ñ–Ω –∂–∞–π –∂–∞—Ç—Ç–∞–ø “õ–∞–Ω–∞ “õ–æ–π–º–∞–π, –æ–ª–∞—Ä–¥—ã “õ–∞–ª–∞–π –∞“õ—ã–ª–º–µ–Ω “õ–æ–ª–¥–∞–Ω—É –∫–µ—Ä–µ–∫—Ç—ñ–≥—ñ–Ω “Ø–π—Ä–µ–Ω–µ–π—ñ–∫.&lt;/p&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 w-full max-w-5xl&#34;&gt;
                        ${createMenuCard(&#39;–¢–∏—ñ–º–¥—ñ –ï—Å–µ–ø—Ç–µ—É&#39;, &#39;calculator&#39;, &#39;–°–∞–Ω–¥–∞—Ä–¥—ã —Ç–∏—ñ–º–¥—ñ –∂“±–ø—Ç–∞–ø –±–æ—è.&#39;, &#39;emerald&#39;, &#39;grouping&#39;)}
                        ${createMenuCard(&#39;“ö–∞—Ç–µ –Ü–∑–¥–µ—É—à—ñ&#39;, &#39;check&#39;, &#39;–ï—Å–µ–ø—Ç—ñ“£ —à—ã“ì–∞—Ä—ã–ª—É—ã–Ω–∞–Ω “õ–∞—Ç–µ —Ç–∞–ø.&#39;, &#39;rose&#39;, &#39;error-hunt&#39;)}
                        ${createMenuCard(&#39;–õ–æ–≥–∏–∫–∞–ª—ã“õ –¢–∞—Ä–∞–∑—ã&#39;, &#39;scale&#39;, &#39;–¢–µ“£–¥—ñ–∫—Ç—ñ —Å–∞“õ—Ç–∞—É “Ø—à—ñ–Ω —Å–∞–Ω–¥–∞—Ä–¥—ã ”©–∑–≥–µ—Ä—Ç.&#39;, &#39;amber&#39;, &#39;logic-balance&#39;)}
                        ${createMenuCard(&#39;–ë—ñ–ª—ñ–º–¥—ñ –¢–µ–∫—Å–µ—Ä—É&#39;, &#39;clipboard-list&#39;, &#39;–¢–∞“õ—ã—Ä—ã–ø –±–æ–π—ã–Ω—à–∞ —Ç–µ—Å—Ç —Ç–∞–ø—Å—ã—Ä.&#39;, &#39;indigo&#39;, &#39;quiz&#39;)}
                    &lt;/div&gt;
                &lt;/div&gt;
            `;
            container.innerHTML = menuHtml;

            // Add Click Listeners
            container.querySelectorAll(&#39;.menu-card&#39;).forEach(btn =&gt; {
                btn.addEventListener(&#39;click&#39;, () =&gt; {
                    const section = btn.dataset.section;
                    // Reset sub-state
                    if(section === &#39;grouping&#39;) resetGrouping();
                    if(section === &#39;error-hunt&#39;) resetErrorHunt();
                    if(section === &#39;logic-balance&#39;) resetBalance();
                    if(section === &#39;quiz&#39;) resetQuiz();
                    
                    state.currentSection = section;
                    render();
                });
            });
        }

        function createMenuCard(title, icon, desc, colorName, section) {
            const colors = {
                emerald: &#39;hover:border-emerald-400 hover:shadow-emerald-100 text-emerald-500&#39;,
                rose: &#39;hover:border-rose-400 hover:shadow-rose-100 text-rose-500&#39;,
                amber: &#39;hover:border-amber-400 hover:shadow-amber-100 text-amber-500&#39;,
                indigo: &#39;hover:border-indigo-400 hover:shadow-indigo-100 text-indigo-500&#39;
            };
            return `
                &lt;button data-section=&#34;${section}&#34; class=&#34;menu-card bg-white border-2 border-slate-100 p-6 rounded-xl shadow-sm text-left transition-all duration-300 transform hover:-translate-y-1 ${colors[colorName]} group&#34;&gt;
                    &lt;div class=&#34;mb-4 bg-slate-50 p-3 rounded-full w-fit group-hover:scale-110 transition-transform&#34;&gt;
                        &lt;i data-lucide=&#34;${icon}&#34; class=&#34;w-10 h-10&#34;&gt;&lt;/i&gt;
                    &lt;/div&gt;
                    &lt;h3 class=&#34;text-xl font-bold text-slate-800 mb-2&#34;&gt;${title}&lt;/h3&gt;
                    &lt;p class=&#34;text-slate-500 text-sm leading-relaxed&#34;&gt;${desc}&lt;/p&gt;
                &lt;/button&gt;
            `;
        }

        // --- Smart Grouping Section ---
        function resetGrouping() {
            state.grouping = { level: 0, selectedIds: [], matchedGroups: [], message: null, completed: false };
        }

        function renderGrouping(container) {
            if (state.grouping.completed) {
                container.innerHTML = createCompletionScreen(&#39;–¢–∞–º–∞—à–∞!&#39;, &#39;–°–µ–Ω —Å–∞–Ω–¥–∞—Ä–¥—ã “õ–∞—Å–∏–µ—Ç—Ç–µ—Ä—ñ–Ω–µ “õ–∞—Ä–∞–π —Ç–æ–ø—Ç–∞—Å—Ç—ã—Ä—É–¥—ã –º–µ“£–≥–µ—Ä–¥—ñ“£.&#39;, &#39;error-hunt&#39;);
                attachCompletionListeners();
                return;
            }

            const currentLevel = groupingLevels[state.grouping.level];
            
            let html = `
                &lt;div class=&#34;max-w-3xl mx-auto h-full flex flex-col&#34;&gt;
                    &lt;div class=&#34;flex justify-between items-center mb-4&#34;&gt;
                        &lt;h2 class=&#34;text-xl font-bold text-slate-700&#34;&gt;–î–µ“£–≥–µ–π ${state.grouping.level &#43; 1}/4&lt;/h2&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;bg-indigo-50 border-2 border-indigo-100 rounded-2xl p-6 mb-8 text-center shadow-sm&#34;&gt;
                        &lt;p class=&#34;text-2xl md:text-3xl font-bold text-indigo-900 leading-tight&#34;&gt;${currentLevel.hint}&lt;/p&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;grid grid-cols-2 gap-6 mb-auto&#34;&gt;
                        ${currentLevel.numbers.map(num =&gt; {
                            const matched = state.grouping.matchedGroups.find(g =&gt; g.ids.includes(num.id));
                            const solvedColor = matched ? matched.color : &#39;&#39;;
                            const isSelected = state.grouping.selectedIds.includes(num.id);
                            
                            let classes = &#39;h-32 md:h-40 text-5xl md:text-6xl font-bold rounded-2xl border-4 transition-all duration-300 flex items-center justify-center &#39;;
                            if (solvedColor) classes &#43;= `${solvedColor} opacity-90 scale-95 shadow-inner`;
                            else if (isSelected) classes &#43;= &#39;bg-indigo-600 text-white border-indigo-700 scale-105 shadow-xl&#39;;
                            else classes &#43;= &#39;bg-white border-slate-200 text-slate-700 hover:border-indigo-300 hover:shadow-lg hover:-translate-y-1&#39;;

                            return `&lt;button onclick=&#34;handleGroupingSelect(${num.id}, ${num.val})&#34; class=&#34;${classes}&#34; ${solvedColor ? &#39;disabled&#39; : &#39;&#39;}&gt;${num.val}&lt;/button&gt;`;
                        }).join(&#39;&#39;)}
                    &lt;/div&gt;
                    ${state.grouping.message ? `&lt;div class=&#34;mt-4 text-center text-xl font-bold p-4 rounded-xl animate-pulse ${state.grouping.message.includes(&#39;!&#39;) ? &#39;bg-green-100 text-green-800&#39; : &#39;bg-red-100 text-red-800&#39;}&#34;&gt;${state.grouping.message}&lt;/div&gt;` : &#39;&#39;}
                &lt;/div&gt;
            `;
            container.innerHTML = html;
        }

        window.handleGroupingSelect = (id, val) =&gt; {
            const gState = state.grouping;
            if (gState.selectedIds.includes(id)) {
                gState.selectedIds = gState.selectedIds.filter(i =&gt; i !== id);
            } else {
                gState.selectedIds.push(id);
                if (gState.selectedIds.length === 2) {
                    checkGroupingPair();
                }
            }
            render();
        };

        function checkGroupingPair() {
            const gState = state.grouping;
            const level = groupingLevels[gState.level];
            const ids = gState.selectedIds;
            const item1 = level.numbers.find(n =&gt; n.id === ids[0]);
            const item2 = level.numbers.find(n =&gt; n.id === ids[1]);

            let isMatch = false;
            if (level.isDistributive) isMatch = (item1.val &#43; item2.val === level.target);
            else if (level.isPartialSum) {
                if ((item1.val === 145 &amp;&amp; item2.val === 55) || (item1.val === 55 &amp;&amp; item2.val === 145)) isMatch = true;
                if ((item1.val === 280 &amp;&amp; item2.val === 20) || (item1.val === 20 &amp;&amp; item2.val === 280)) isMatch = true;
            }
            else if (level.isMult) isMatch = (item1.val * item2.val === level.target);
            else isMatch = (item1.val &#43; item2.val === level.target);

            if (isMatch) {
                const color = pairColors[gState.matchedGroups.length % pairColors.length];
                gState.matchedGroups.push({ ids: [...ids], color });
                gState.message = &#34;–ñ–∞—Ä–∞–π—Å—ã“£! ”®—Ç–µ —Ç–∏—ñ–º–¥—ñ –∂“±–ø.&#34;;
                
                // Check level completion
                if (gState.matchedGroups.length * 2 === level.numbers.length) {
                    setTimeout(() =&gt; {
                        if (gState.level &lt; groupingLevels.length - 1) {
                            gState.level&#43;&#43;;
                            gState.selectedIds = [];
                            gState.matchedGroups = [];
                            gState.message = &#34;–ö–µ—Ä–µ–º–µ—Ç! –ö–µ–ª–µ—Å—ñ –¥–µ“£–≥–µ–π–≥–µ ”©—Ç—Ç—ñ–∫.&#34;;
                        } else {
                            gState.completed = true;
                        }
                        render();
                    }, 1000);
                }
            } else {
                gState.message = &#34;–ë“±–ª –∂“±–ø —Ç–∏—ñ–º—Å—ñ–∑. “ö–∞–π—Ç–∞ –æ–π–ª–∞–Ω!&#34;;
            }

            setTimeout(() =&gt; {
                gState.message = null;
                if(!isMatch) gState.selectedIds = [];
                else gState.selectedIds = []; // Clear selection visually but keep in matched
                render();
            }, 1000);
        }

        // --- Error Hunt Section ---
        function resetErrorHunt() {
            state.errorHunt = { problemIndex: 0, feedback: null };
        }

        function renderErrorHunt(container) {
            if (state.errorHunt.feedback === &#34;COMPLETED_ALL&#34;) {
                container.innerHTML = createCompletionScreen(&#39;–ñ–∞—Ä–∞–π—Å—ã“£!&#39;, &#39;–°–µ–Ω “õ–∞—Ç–µ–ª–µ—Ä–¥—ñ –∞–Ω—ã“õ—Ç–∞–ø, –µ—Ä–µ–∂–µ–ª–µ—Ä–¥—ñ –∂–∞“õ—Å—ã —Ç“Ø—Å—ñ–Ω–µ—Ç—ñ–Ω—ñ“£–¥—ñ –¥”ô–ª–µ–ª–¥–µ–¥—ñ“£.&#39;, &#39;logic-balance&#39;);
                attachCompletionListeners();
                return;
            }

            const problem = errorHuntProblems[state.errorHunt.problemIndex];
            
            let html = `
                &lt;div class=&#34;max-w-2xl mx-auto bg-slate-50 p-6 rounded-xl border border-slate-200&#34;&gt;
                    &lt;div class=&#34;flex items-center gap-3 mb-4&#34;&gt;
                        &lt;span class=&#34;bg-rose-100 text-rose-600 p-2 rounded-lg font-bold&#34;&gt;#${state.errorHunt.problemIndex &#43; 1}&lt;/span&gt;
                        &lt;h3 class=&#34;text-xl font-bold text-slate-800&#34;&gt;${problem.title}&lt;/h3&gt;
                    &lt;/div&gt;
                    &lt;p class=&#34;text-slate-800 mb-6 font-bold text-lg&#34;&gt;${problem.instruction || problem.question}&lt;/p&gt;
                    
                    &lt;div class=&#34;bg-white p-4 rounded-lg shadow-sm border border-slate-200 space-y-2 font-mono text-xl&#34;&gt;
                        ${problem.steps.map(step =&gt; {
                            let stepClass = &#34;p-4 rounded border transition-colors flex justify-between items-center &#34;;
                            if (problem.isInteractiveSteps) stepClass &#43;= &#34;cursor-pointer hover:bg-indigo-50 hover:border-indigo-300 &#34;;
                            else stepClass &#43;= &#34;border-transparent &#34;;
                            
                            // Visual Feedback logic
                            if (state.errorHunt.feedback &amp;&amp; step.status === &#39;error&#39; &amp;&amp; state.errorHunt.feedback.includes(&#39;–î“±—Ä—ã—Å —Ç–∞–ø—Ç—ã“£&#39;)) {
                                stepClass &#43;= &#34;bg-red-50 border-red-300 &#34;;
                            }

                            return `
                                &lt;div onclick=&#34;handleErrorStepClick(${step.id})&#34; class=&#34;${stepClass}&#34;&gt;
                                    &lt;span&gt;${step.text}&lt;/span&gt;
                                    ${problem.isInteractiveSteps ? &#39;&lt;span class=&#34;text-slate-400 text-sm italic&#34;&gt;–¢–µ–∫—Å–µ—Ä—É&lt;/span&gt;&#39; : &#39;&#39;}
                                &lt;/div&gt;
                            `;
                        }).join(&#39;&#39;)}
                    &lt;/div&gt;

                    ${!problem.isInteractiveSteps ? `
                        &lt;div class=&#34;mt-6 flex gap-4&#34;&gt;
                            ${problem.options.map(opt =&gt; `
                                &lt;button onclick=&#34;handleErrorOption(&#39;${opt}&#39;)&#34; class=&#34;flex-1 px-4 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 text-lg font-medium&#34;&gt;${opt}&lt;/button&gt;
                            `).join(&#39;&#39;)}
                        &lt;/div&gt;
                    ` : &#39;&#39;}

                    ${state.errorHunt.feedback ? `
                        &lt;div class=&#34;mt-6 p-4 rounded-lg border ${state.errorHunt.feedback.includes(&#39;–î“±—Ä—ã—Å&#39;) || state.errorHunt.feedback.includes(&#39;–ñ–∞—Ä–∞–π—Å—ã“£&#39;) ? &#39;bg-emerald-50 border-emerald-200 text-emerald-800&#39; : &#39;bg-amber-50 border-amber-200 text-amber-800&#39;}&#34;&gt;
                            &lt;div class=&#34;flex gap-2 items-center text-lg&#34;&gt;
                                &lt;i data-lucide=&#34;${state.errorHunt.feedback.includes(&#39;–î“±—Ä—ã—Å&#39;) ? &#39;check&#39; : &#39;brain&#39;}&#34;&gt;&lt;/i&gt;
                                &lt;p class=&#34;font-medium&#34;&gt;${state.errorHunt.feedback}&lt;/p&gt;
                            &lt;/div&gt;
                            ${(state.errorHunt.feedback.includes(&#39;–î“±—Ä—ã—Å&#39;) || state.errorHunt.feedback.includes(&#39;–ñ–∞—Ä–∞–π—Å—ã“£&#39;)) ? `
                                &lt;button onclick=&#34;nextErrorProblem()&#34; class=&#34;mt-4 w-full py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 font-bold flex justify-center items-center gap-2&#34;&gt;
                                    ${state.errorHunt.problemIndex &lt; errorHuntProblems.length - 1 ? &#39;–ö–µ–ª–µ—Å—ñ –µ—Å–µ–ø–∫–µ ”©—Ç—É&#39; : &#39;–ê—è“õ—Ç–∞—É&#39;} &lt;i data-lucide=&#34;chevron-right&#34;&gt;&lt;/i&gt;
                                &lt;/button&gt;
                            ` : &#39;&#39;}
                        &lt;/div&gt;
                    ` : &#39;&#39;}
                &lt;/div&gt;
            `;
            container.innerHTML = html;
        }

        window.handleErrorStepClick = (stepId) =&gt; {
            const problem = errorHuntProblems[state.errorHunt.problemIndex];
            if (!problem.isInteractiveSteps) return;
            
            const step = problem.steps.find(s =&gt; s.id === stepId);
            if (step.status === &#39;error&#39;) {
                state.errorHunt.feedback = `–î“±—Ä—ã—Å —Ç–∞–ø—Ç—ã“£! ${step.reason}`;
            } else if (step.status === &#39;correct&#39; &amp;&amp; step.reason) {
                state.errorHunt.feedback = `–ë“±–ª “õ–∞–¥–∞–º –¥“±—Ä—ã—Å. ${step.reason}`;
            } else {
                state.errorHunt.feedback = &#34;–ë“±–ª “õ–∞–¥–∞–º–¥–∞ “õ–∞—Ç–µ –∂–æ“õ. –ë–∞—Å“õ–∞—Å—ã–Ω —Ç–µ–∫—Å–µ—Ä—ñ–ø –∫”©—Ä.&#34;;
            }
            render();
        };

        window.handleErrorOption = (opt) =&gt; {
            const problem = errorHuntProblems[state.errorHunt.problemIndex];
            if (opt === problem.correctAnswer) {
                state.errorHunt.feedback = &#34;–ñ–∞—Ä–∞–π—Å—ã“£! –ë“±–ª –µ—Å–µ–ø—Ç–µ “õ–∞—Å–∏–µ—Ç—Ç–µ—Ä –¥“±—Ä—ã—Å “õ–æ–ª–¥–∞–Ω—ã–ª“ì–∞–Ω.&#34;;
            } else {
                state.errorHunt.feedback = &#34;“ö–∞—Ç–µ–ª–µ—Å—Ç—ñ“£. –ú“±“õ–∏—è—Ç “õ–∞—Ä–∞–ø —à—ã“õ—à—ã.&#34;;
            }
            render();
        };

        window.nextErrorProblem = () =&gt; {
            state.errorHunt.feedback = null;
            if (state.errorHunt.problemIndex &lt; errorHuntProblems.length - 1) {
                state.errorHunt.problemIndex&#43;&#43;;
            } else {
                state.errorHunt.feedback = &#34;COMPLETED_ALL&#34;;
            }
            render();
        };

        // --- Logic Balance Section ---
        function resetBalance() {
            const firstLevel = balanceLevels[0];
            state.balance = { level: 0, boxes: [...firstLevel.initial], feedback: null, completed: false };
        }

        function renderLogicBalance(container) {
            if (state.balance.completed) {
                container.innerHTML = createCompletionScreen(&#39;“ö“±—Ç—Ç—ã“õ—Ç–∞–π–º—ã–∑!&#39;, &#39;–°–µ–Ω –±–∞—Ä–ª—ã“õ –ª–æ–≥–∏–∫–∞–ª—ã“õ —Ç–∞–ø—Å—ã—Ä–º–∞–ª–∞—Ä–¥—ã –æ—Ä—ã–Ω–¥–∞–¥—ã“£!&#39;, &#39;menu&#39;);
                attachCompletionListeners();
                return;
            }

            const currentLevel = balanceLevels[state.balance.level];

            let html = `
                &lt;div class=&#34;max-w-4xl mx-auto&#34;&gt;
                    &lt;div class=&#34;mb-6 bg-amber-50 p-6 rounded-xl border border-amber-100 flex justify-between items-start&#34;&gt;
                        &lt;div&gt;
                            &lt;h2 class=&#34;text-2xl font-bold text-slate-800 mb-2&#34;&gt;${currentLevel.title}&lt;/h2&gt;
                            &lt;p class=&#34;text-slate-700 text-lg&#34;&gt;${currentLevel.desc}&lt;/p&gt;
                        &lt;/div&gt;
                        &lt;span class=&#34;bg-amber-200 text-amber-800 px-3 py-1 rounded-full font-bold&#34;&gt;${state.balance.level &#43; 1} / ${balanceLevels.length}&lt;/span&gt;
                    &lt;/div&gt;

                    &lt;div class=&#34;flex flex-wrap justify-center items-end gap-4 md:gap-8 my-8 min-h-[300px]&#34;&gt;
                        ${state.balance.boxes.map((count, index) =&gt; `
                            &lt;div class=&#34;flex flex-col items-center gap-4&#34;&gt;
                                &lt;div class=&#34;w-32 md:w-40 h-40 md:h-48 bg-white border-4 border-amber-300 rounded-b-3xl relative flex flex-wrap content-end justify-center p-2 gap-1 transition-all duration-300 shadow-inner&#34;&gt;
                                    &lt;span class=&#34;absolute -top-12 font-bold text-3xl text-amber-800 bg-amber-100 w-12 h-12 rounded-full flex items-center justify-center border-2 border-amber-200 shadow&#34;&gt;${count}&lt;/span&gt;
                                    ${Array(count).fill(0).map(() =&gt; &#39;&lt;div class=&#34;w-5 h-5 md:w-6 md:h-6 rounded-full bg-red-500 shadow-sm border border-red-600&#34;&gt;&lt;/div&gt;&#39;).join(&#39;&#39;)}
                                &lt;/div&gt;
                                &lt;div class=&#34;flex gap-2&#34;&gt;
                                    ${index &gt; 0 ? `&lt;button onclick=&#34;moveBalanceItem(${index}, ${index - 1})&#34; ${count === 0 ? &#39;disabled&#39; : &#39;&#39;} class=&#34;p-2 bg-indigo-100 hover:bg-indigo-500 hover:text-white text-indigo-700 rounded-full transition shadow-md disabled:opacity-30&#34;&gt;&lt;i data-lucide=&#34;arrow-left&#34; class=&#34;w-5 h-5&#34;&gt;&lt;/i&gt;&lt;/button&gt;` : &#39;&#39;}
                                    &lt;span class=&#34;font-bold text-slate-400&#34;&gt;${index &#43; 1}-“õ–æ—Ä–∞–ø&lt;/span&gt;
                                    ${index &lt; state.balance.boxes.length - 1 ? `&lt;button onclick=&#34;moveBalanceItem(${index}, ${index &#43; 1})&#34; ${count === 0 ? &#39;disabled&#39; : &#39;&#39;} class=&#34;p-2 bg-indigo-100 hover:bg-indigo-500 hover:text-white text-indigo-700 rounded-full transition shadow-md disabled:opacity-30&#34;&gt;&lt;i data-lucide=&#34;arrow-right&#34; class=&#34;w-5 h-5&#34;&gt;&lt;/i&gt;&lt;/button&gt;` : &#39;&#39;}
                                &lt;/div&gt;
                            &lt;/div&gt;
                        `).join(&#39;&#39;)}
                    &lt;/div&gt;

                    &lt;div class=&#34;bg-white p-6 rounded-xl shadow-lg border border-slate-100 min-h-[100px] flex items-center justify-center&#34;&gt;
                        ${state.balance.feedback ? `
                            &lt;div class=&#34;text-emerald-600 font-bold text-2xl flex flex-col items-center gap-2 animate-bounce&#34;&gt;
                                &lt;div class=&#34;flex items-center gap-2&#34;&gt;&lt;i data-lucide=&#34;check&#34; class=&#34;w-8 h-8&#34;&gt;&lt;/i&gt; ${state.balance.feedback}&lt;/div&gt;
                                &lt;button onclick=&#34;nextBalanceLevel()&#34; class=&#34;mt-2 text-base bg-emerald-100 px-6 py-2 rounded-lg hover:bg-emerald-200 text-emerald-800 transition shadow flex items-center gap-2&#34;&gt;
                                    ${state.balance.level &lt; balanceLevels.length - 1 ? &#34;–ö–µ–ª–µ—Å—ñ –¥–µ“£–≥–µ–π &gt;&#34; : &#34;–ê—è“õ—Ç–∞—É&#34;}
                                &lt;/button&gt;
                            &lt;/div&gt;
                        ` : &#39;&lt;p class=&#34;text-slate-400 italic text-xl text-center&#34;&gt;–ê–ª–º–∞–ª–∞—Ä–¥—ã –∞—É—ã—Å—Ç—ã—Ä—É “Ø—à—ñ–Ω –±–∞“ì–¥–∞—Ä—à–∞–ª–∞—Ä–¥—ã –±–∞—Å...&lt;/p&gt;&#39;}
                    &lt;/div&gt;

                     &lt;div class=&#34;mt-8 p-6 bg-indigo-50 rounded-xl text-indigo-900 border border-indigo-100&#34;&gt;
                        &lt;h4 className=&#34;font-bold mb-2 text-lg flex items-center gap-2&#34;&gt;&lt;i data-lucide=&#34;lightbulb&#34;&gt;&lt;/i&gt; –û–π–ª–∞–Ω:&lt;/h4&gt;
                        &lt;p class=&#34;text-lg&#34;&gt;${state.balance.level === 2 ? &#34;“Æ—à “õ–æ—Ä–∞–ø—Ç—ã —Ç–µ“£–µ—Å—Ç—ñ—Ä—É “Ø—à—ñ–Ω –∂–∞–ª–ø—ã –∞–ª–º–∞ —Å–∞–Ω—ã–Ω 3-–∫–µ –±”©–ª—É –∫–µ—Ä–µ–∫ –µ–∫–µ–Ω—ñ–Ω –±–∞–π“õ–∞–¥—ã“£ –±–∞?&#34; : &#34;–ë—ñ—Ä –∂–∞“õ—Ç–∞–Ω –∞–ª—Å–∞“£, –µ–∫—ñ–Ω—à—ñ –∂–∞“õ“õ–∞ “õ–æ—Å—ã–ª–∞–¥—ã. –ñ–∞–ª–ø—ã “õ–æ—Å—ã–Ω–¥—ã ”©–∑–≥–µ—Ä–º–µ–π–¥—ñ.&#34;}&lt;/p&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            `;
            container.innerHTML = html;
        }

        window.moveBalanceItem = (from, to) =&gt; {
            const boxes = state.balance.boxes;
            if (boxes[from] &gt; 0) {
                boxes[from]--;
                boxes[to]&#43;&#43;;
            }
            
            // Check win
            const allEqual = boxes.every(val =&gt; val === boxes[0]);
            if (allEqual &amp;&amp; boxes[0] &gt; 0) {
                state.balance.feedback = `–ö–µ—Ä–µ–º–µ—Ç! –ë–∞—Ä–ª—ã“õ “õ–æ—Ä–∞–ø—Ç–∞ ${boxes[0]} –∞–ª–º–∞–¥–∞–Ω –±–æ–ª–¥—ã.`;
            } else {
                state.balance.feedback = null;
            }
            render();
        };

        window.nextBalanceLevel = () =&gt; {
            if (state.balance.level &lt; balanceLevels.length - 1) {
                state.balance.level&#43;&#43;;
                state.balance.boxes = [...balanceLevels[state.balance.level].initial];
                state.balance.feedback = null;
            } else {
                state.balance.completed = true;
            }
            render();
        };

        // --- Quiz Section ---
        function resetQuiz() {
            state.quiz = {
                questionIndex: 0,
                score: 0,
                selectedOption: null,
                isAnswered: false,
                completed: false
            };
        }

        function renderQuiz(container) {
            if (state.quiz.completed) {
                container.innerHTML = createCompletionScreen(
                    &#39;–¢–µ—Å—Ç –∞—è“õ—Ç–∞–ª–¥—ã!&#39;, 
                    `–°—ñ–∑–¥—ñ“£ –Ω”ô—Ç–∏–∂–µ“£—ñ–∑: ${state.quiz.score} / ${quizQuestions.length}. ${state.quiz.score === quizQuestions.length ? &#39;”®—Ç–µ –∂–∞“õ—Å—ã!&#39; : state.quiz.score &gt;= 5 ? &#39;–ñ–∞“õ—Å—ã, –±—ñ—Ä–∞“õ ”ô–ª—ñ –¥–µ “õ–∞–π—Ç–∞–ª–∞—É –∫–µ—Ä–µ–∫.&#39; : &#39;–¢–∞“õ—ã—Ä—ã–ø—Ç—ã “õ–∞–π—Ç–∞–ª–∞–ø –æ“õ—ã–ø —à—ã“ì—É –∫–µ—Ä–µ–∫.&#39;}`, 
                    &#39;menu&#39;
                );
                attachCompletionListeners();
                return;
            }

            const currentQ = quizQuestions[state.quiz.questionIndex];
            
            let html = `
                &lt;div class=&#34;max-w-2xl mx-auto bg-white p-6 rounded-xl border border-slate-200 shadow-sm h-full flex flex-col&#34;&gt;
                    &lt;div class=&#34;flex justify-between items-center mb-6&#34;&gt;
                        &lt;h2 class=&#34;text-xl font-bold text-slate-800&#34;&gt;–°“±—Ä–∞“õ ${state.quiz.questionIndex &#43; 1} / ${quizQuestions.length}&lt;/h2&gt;
                        &lt;span class=&#34;bg-indigo-100 text-indigo-600 px-3 py-1 rounded-full text-sm font-bold&#34;&gt;“∞–ø–∞–π: ${state.quiz.score}&lt;/span&gt;
                    &lt;/div&gt;

                    &lt;div class=&#34;mb-8&#34;&gt;
                        &lt;p class=&#34;text-2xl font-bold text-slate-900 leading-snug&#34;&gt;${currentQ.question}&lt;/p&gt;
                    &lt;/div&gt;

                    &lt;div class=&#34;flex flex-col gap-3 flex-grow&#34;&gt;
                        ${currentQ.options.map((opt, idx) =&gt; {
                            let btnClass = &#34;w-full p-4 text-left border-2 rounded-xl transition-all font-medium text-lg &#34;;
                            
                            if (state.quiz.isAnswered) {
                                if (idx === currentQ.correct) btnClass &#43;= &#34;bg-emerald-100 border-emerald-500 text-emerald-800 &#34;;
                                else if (idx === state.quiz.selectedOption) btnClass &#43;= &#34;bg-rose-100 border-rose-500 text-rose-800 &#34;;
                                else btnClass &#43;= &#34;bg-slate-50 border-slate-200 text-slate-400 &#34;;
                            } else {
                                btnClass &#43;= &#34;bg-white border-slate-200 text-slate-700 hover:border-indigo-400 hover:bg-indigo-50 &#34;;
                            }

                            return `&lt;button onclick=&#34;handleQuizOption(${idx})&#34; ${state.quiz.isAnswered ? &#39;disabled&#39; : &#39;&#39;} class=&#34;${btnClass}&#34;&gt;${opt}&lt;/button&gt;`;
                        }).join(&#39;&#39;)}
                    &lt;/div&gt;

                    ${state.quiz.isAnswered ? `
                        &lt;div class=&#34;mt-6 flex justify-end&#34;&gt;
                            &lt;button onclick=&#34;nextQuizQuestion()&#34; class=&#34;px-8 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 shadow-lg font-bold flex items-center gap-2 text-lg animate-pulse&#34;&gt;
                                ${state.quiz.questionIndex &lt; quizQuestions.length - 1 ? &#39;–ö–µ–ª–µ—Å—ñ —Å“±—Ä–∞“õ&#39; : &#39;–ù”ô—Ç–∏–∂–µ–Ω—ñ –∫”©—Ä—É&#39;} &lt;i data-lucide=&#34;arrow-right&#34;&gt;&lt;/i&gt;
                            &lt;/button&gt;
                        &lt;/div&gt;
                    ` : &#39;&#39;}
                &lt;/div&gt;
            `;
            container.innerHTML = html;
        }

        window.handleQuizOption = (idx) =&gt; {
            if (state.quiz.isAnswered) return;
            
            state.quiz.selectedOption = idx;
            state.quiz.isAnswered = true;
            
            if (idx === quizQuestions[state.quiz.questionIndex].correct) {
                state.quiz.score&#43;&#43;;
            }
            render();
        };

        window.nextQuizQuestion = () =&gt; {
            if (state.quiz.questionIndex &lt; quizQuestions.length - 1) {
                state.quiz.questionIndex&#43;&#43;;
                state.quiz.selectedOption = null;
                state.quiz.isAnswered = false;
            } else {
                state.quiz.completed = true;
            }
            render();
        };

        // --- Helpers ---
        function createCompletionScreen(title, desc, nextSection) {
            const btnText = nextSection === &#39;menu&#39; ? &#39;–ú”ô–∑—ñ—Ä–≥–µ –æ—Ä–∞–ª—É&#39; : &#39;–ö–µ–ª–µ—Å—ñ —Ç–∞–ø—Å—ã—Ä–º–∞&#39;;
            const icon = nextSection === &#39;menu&#39; ? &#39;&#39; : &#39;&lt;i data-lucide=&#34;arrow-right&#34;&gt;&lt;/i&gt;&#39;;
            return `
                &lt;div class=&#34;flex flex-col items-center justify-center h-full text-center p-6&#34;&gt;
                    &lt;i data-lucide=&#34;sparkles&#34; class=&#34;w-20 h-20 text-yellow-500 mb-6 animate-bounce&#34;&gt;&lt;/i&gt;
                    &lt;h2 class=&#34;text-4xl font-bold text-indigo-800 mb-4&#34;&gt;${title}&lt;/h2&gt;
                    &lt;p class=&#34;text-slate-600 text-xl mb-8 max-w-md&#34;&gt;${desc}&lt;/p&gt;
                    &lt;div class=&#34;flex gap-4&#34;&gt;
                        &lt;button onclick=&#34;state.currentSection=&#39;menu&#39;; render()&#34; class=&#34;px-6 py-3 border-2 border-indigo-200 text-indigo-700 rounded-xl hover:bg-indigo-50 font-bold&#34;&gt;–ú”ô–∑—ñ—Ä–≥–µ –æ—Ä–∞–ª—É&lt;/button&gt;
                        ${nextSection !== &#39;menu&#39; ? `
                            &lt;button id=&#34;next-task-btn&#34; data-next=&#34;${nextSection}&#34; class=&#34;px-8 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 shadow-lg font-bold flex items-center gap-2 text-lg animate-pulse&#34;&gt;
                                ${btnText} ${icon}
                            &lt;/button&gt;
                        ` : &#39;&#39;}
                    &lt;/div&gt;
                &lt;/div&gt;
            `;
        }

        function attachCompletionListeners() {
            const btn = document.getElementById(&#39;next-task-btn&#39;);
            if(btn) {
                btn.onclick = () =&gt; {
                    const next = btn.dataset.next;
                    if(next === &#39;error-hunt&#39;) resetErrorHunt();
                    if(next === &#39;logic-balance&#39;) resetBalance();
                    if(next === &#39;quiz&#39;) resetQuiz();
                    state.currentSection = next;
                    render();
                }
            }
            lucide.createIcons();
        }

        // --- Init ---
        render();

    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;"
                                class="absolute top-0 left-0 w-full h-full border-0" loading="lazy" allowfullscreen>
                            </iframe>
                            
                            <button id="exitBtn137" onclick="closeTaskFullscreen()"
                                class="hidden absolute top-4 right-4 bg-red-600 text-white px-4 py-2 rounded-lg shadow-lg hover:bg-red-700 transition-colors z-50 flex items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M6 18L18 6M6 6l12 12" />
                                </svg>
                                <span>–®—ã“ì—É</span>
                            </button>
                        </div>

                        
                        <div class="bg-gray-50 p-2 border-t border-gray-200">
                            <a href="/task/137" target="_blank"
                                class="text-blue-600 hover:text-blue-800 font-medium flex items-center justify-center gap-1 text-sm">
                                <span>–ñ–∞“£–∞ —Ç–µ—Ä–µ–∑–µ–¥–µ –∞—à—É</span>
                                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14">
                                    </path>
                                </svg>
                            </a>
                        </div>
                    </div>

                    
                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden border-2 border-purple-200">
                        
                        <div class="bg-gradient-to-r from-red-500 to-pink-600 p-3">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2">
                                    <span class="text-2xl">üá∑üá∫</span>
                                    <h4 class="text-lg font-bold text-white">–†—É—Å—Å–∫–∏–π</h4>
                                </div>
                                <button onclick="openTaskFullscreen('137', 'ru')"
                                    class="flex items-center gap-2 bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-3 py-1.5 rounded-lg transition-all transform hover:scale-105">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4">
                                        </path>
                                    </svg>
                                    <span class="hidden lg:inline text-sm">–ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω</span>
                                </button>
                            </div>
                        </div>

                        
                        <div id="fsContainer137_ru" class="relative bg-gray-50 group"
                            style="padding-bottom: 75%; height: 0;">
                            <iframe id="taskFrame137_ru" srcdoc="&lt;!DOCTYPE html&gt;
&lt;html lang=&#34;ru&#34;&gt;
&lt;head&gt;
    &lt;meta charset=&#34;UTF-8&#34;&gt;
    &lt;meta name=&#34;viewport&#34; content=&#34;width=device-width, initial-scale=1.0&#34;&gt;
    &lt;title&gt;–°–≤–æ–π—Å—Ç–≤–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ç—Ä–µ–Ω–∞–∂–µ—Ä&lt;/title&gt;
    &lt;script src=&#34;https://cdn.tailwindcss.com&#34;&gt;&lt;/script&gt;
    &lt;script src=&#34;https://unpkg.com/lucide@latest&#34;&gt;&lt;/script&gt;
    &lt;style&gt;
        .animate-fadeIn { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .transition-all { transition-property: all; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 300ms; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body class=&#34;min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 font-sans text-slate-800 p-4&#34;&gt;

    &lt;div id=&#34;app-container&#34; class=&#34;max-w-4xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden min-h-[600px] flex flex-col relative&#34;&gt;
        &lt;header class=&#34;bg-indigo-600 p-4 text-white flex justify-between items-center shadow-md z-10&#34;&gt;
            &lt;div class=&#34;flex items-center gap-2&#34;&gt;
                &lt;i data-lucide=&#34;brain&#34; class=&#34;w-8 h-8&#34;&gt;&lt;/i&gt;
                &lt;h1 class=&#34;text-xl md:text-2xl font-bold&#34;&gt;–°–≤–æ–π—Å—Ç–≤–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π&lt;/h1&gt;
            &lt;/div&gt;
            &lt;button id=&#34;menu-btn&#34; class=&#34;hidden text-sm bg-indigo-500 hover:bg-indigo-400 px-3 py-1 rounded transition&#34;&gt;
                –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
            &lt;/button&gt;
        &lt;/header&gt;

        &lt;main id=&#34;main-content&#34; class=&#34;flex-grow p-4 md:p-6 overflow-y-auto&#34;&gt;
        &lt;/main&gt;
        
        &lt;footer class=&#34;bg-slate-50 p-3 text-center text-slate-500 text-sm border-t&#34;&gt;
            –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è –∏ –ø–æ–Ω–∏–º–∞–Ω–∏—è –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö —Å–≤–æ–π—Å—Ç–≤
        &lt;/footer&gt;
    &lt;/div&gt;

    &lt;script&gt;
        // --- State Management ---
        const state = {
            currentSection: &#39;menu&#39;,
            grouping: { level: 0, selectedIds: [], matchedGroups: [], message: null, completed: false },
            errorHunt: { problemIndex: 0, feedback: null },
            balance: { level: 0, boxes: [], feedback: null, completed: false },
            quiz: { questionIndex: 0, score: 0, selectedOption: null, isAnswered: false, completed: false }
        };

        // --- Data (Translated to Russian) ---
        const groupingLevels = [
            { target: 100, numbers: [{id:1, val:44}, {id:2, val:78}, {id:3, val:56}, {id:4, val:22}], hint: &#34;–°–≥—Ä—É–ø–ø–∏—Ä—É–π —á–∏—Å–ª–∞, —Å—É–º–º–∞ –∫–æ—Ç–æ—Ä—ã—Ö —Ä–∞–≤–Ω–∞ 100! (4&#43;6=10, 8&#43;2=10)&#34; },
            { target: 1000, isPartialSum: true, numbers: [{id:1, val:145}, {id:2, val:280}, {id:3, val:55}, {id:4, val:20}], hint: &#34;–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ: –∏—â–∏ —É–¥–æ–±–Ω—ã–µ —á–∏—Å–ª–∞ (–∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏–µ—Å—è –Ω–∞ 5 –∏–ª–∏ 0)&#34; },
            { target: 100, isMult: true, numbers: [{id:1, val:5}, {id:2, val:25}, {id:3, val:20}, {id:4, val:4}], hint: &#34;–ù–∞–π–¥–∏ –ø–∞—Ä—ã, –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä—ã—Ö —Ä–∞–≤–Ω–æ 100!&#34; },
            { target: 100, isDistributive: true, numbers: [{id:1, val:28}, {id:2, val:72}, {id:3, val:35}, {id:4, val:65}], hint: &#34;–°–æ–µ–¥–∏–Ω–∏ —á–∏—Å–ª–∞, —Å—É–º–º–∞ –∫–æ—Ç–æ—Ä—ã—Ö –≤ —Å–∫–æ–±–∫–∞—Ö –¥–∞—Å—Ç 100 (–ø—Ä–µ–¥—Å—Ç–∞–≤—å –æ–±—â–∏–π –º–Ω–æ–∂–∏—Ç–µ–ª—å –∑–∞ —Å–∫–æ–±–∫–∞–º–∏)&#34; }
        ];

        const errorHuntProblems = [
            { title: &#34;–ó–∞–¥–∞—á–∞ –ê—Å–∫–∞—Ä–∞&#34;, expression: &#34;25 &#43; 18 &#43; 75&#34;, steps: [ { id: 1, text: &#34;25 &#43; 18 &#43; 75&#34;, status: &#39;correct&#39; }, { id: 2, text: &#34;= (25 &#43; 75) &#43; 18&#34;, status: &#39;correct&#39;, reason: &#34;–í–µ—Ä–Ω–æ! –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ —Å–ª–æ–∂–µ–Ω–∏—è.&#34; }, { id: 3, text: &#34;= 100 &#43; 18&#34;, status: &#39;correct&#39; }, { id: 4, text: &#34;= 118&#34;, status: &#39;correct&#39; } ], question: &#34;–ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —Ä–µ—à–µ–Ω–∞ –∑–∞–¥–∞—á–∞?&#34;, options: [&#34;–î–∞, –≤—Å—ë –≤–µ—Ä–Ω–æ&#34;, &#34;–ù–µ—Ç, –µ—Å—Ç—å –æ—à–∏–±–∫–∞&#34;], correctAnswer: &#34;–î–∞, –≤—Å—ë –≤–µ—Ä–Ω–æ&#34; },
            { title: &#34;–ù–∞–π–¥–∏ –æ—à–∏–±–∫—É –ì—É–ª—å–Ω–∞–∑&#34;, expression: &#34;8 ‚Ä¢ (10 &#43; 2)&#34;, steps: [ { id: 1, text: &#34;8 ‚Ä¢ (10 &#43; 2)&#34;, status: &#39;correct&#39; }, { id: 2, text: &#34;= 8 ‚Ä¢ 10 &#43; 2&#34;, status: &#39;error&#39;, reason: &#34;–û—à–∏–±–∫–∞! –ü–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ–ª—å–Ω–æ–º—É —Å–≤–æ–π—Å—Ç–≤—É 8 –Ω—É–∂–Ω–æ —É–º–Ω–æ–∂–∏—Ç—å –Ω–∞ –ö–ê–ñ–î–û–ï —á–∏—Å–ª–æ –≤ —Å–∫–æ–±–∫–∞—Ö: 8‚Ä¢10 &#43; 8‚Ä¢2&#34; }, { id: 3, text: &#34;= 80 &#43; 2&#34;, status: &#39;neutral&#39; }, { id: 4, text: &#34;= 82&#34;, status: &#39;neutral&#39; } ], isInteractiveSteps: true, instruction: &#34;–í –∫–∞–∫–æ–π —Å—Ç—Ä–æ–∫–µ —Å–≤–æ–π—Å—Ç–≤–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ –Ω–µ–≤–µ—Ä–Ω–æ? –ù–∞–∂–º–∏ –Ω–∞ —Å—Ç—Ä–æ–∫—É —Å –æ—à–∏–±–∫–æ–π.&#34; },
            { title: &#34;–ó–∞–¥–∞—á–∞ –ú—É—Ä–∞—Ç–∞&#34;, expression: &#34;(18 - 9) ‚Ä¢ 2&#34;, steps: [ { id: 1, text: &#34;(18 - 9) ‚Ä¢ 2&#34;, status: &#39;correct&#39; }, { id: 2, text: &#34;= 18 ‚Ä¢ 2 - 9 ‚Ä¢ 2&#34;, status: &#39;correct&#39;, reason: &#34;–í–µ—Ä–Ω–æ! –†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ–ª—å–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ —É–º–Ω–æ–∂–µ–Ω–∏—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –≤—ã—á–∏—Ç–∞–Ω–∏—è.&#34; }, { id: 3, text: &#34;= 36 - 18&#34;, status: &#39;correct&#39; }, { id: 4, text: &#34;= 28&#34;, status: &#39;error&#39;, reason: &#34;–û—à–∏–±–∫–∞! –ê—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: 36 - 18 –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 18.&#34; } ], isInteractiveSteps: true, instruction: &#34;–ì–¥–µ –∑–∞–∫—Ä–∞–ª–∞—Å—å –æ—à–∏–±–∫–∞? (–û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ: –≤ —Å–≤–æ–π—Å—Ç–≤–µ –∏–ª–∏ –≤ —Ä–∞—Å—á—ë—Ç–∞—Ö?)&#34; }
        ];

        const balanceLevels = [
            { id: 0, title: &#34;–£—Ä–æ–≤–µ–Ω—å 1: –õ–µ–≥–∫–æ–µ –Ω–∞—á–∞–ª–æ&#34;, desc: &#34;–£—Ä–∞–≤–Ω—è–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —è–±–ª–æ–∫ –≤ –¥–≤—É—Ö –∫–æ—Ä–æ–±–∫–∞—Ö.&#34;, initial: [15, 5], target: [10, 10], boxCount: 2 },
            { id: 1, title: &#34;–£—Ä–æ–≤–µ–Ω—å 2: –ß–∏—Å–ª–∞ –ø–æ–±–æ–ª—å—à–µ&#34;, desc: &#34;–°–∫–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–ª–æ–∂–∏—Ç—å, —á—Ç–æ–±—ã —Å—Ç–∞–ª–æ –ø–æ—Ä–æ–≤–Ω—É?&#34;, initial: [28, 12], target: [20, 20], boxCount: 2 },
            { id: 2, title: &#34;–£—Ä–æ–≤–µ–Ω—å 3: –¢—Ä–∏ —Å–æ—Å—É–¥–∞&#34;, desc: &#34;–°–¥–µ–ª–∞–π —Ç–∞–∫, —á—Ç–æ–±—ã –≤ —Ç—Ä–µ—Ö –∫–æ—Ä–∑–∏–Ω–∞—Ö —Å—Ç–∞–ª–æ –ø–æ—Ä–æ–≤–Ω—É —è–±–ª–æ–∫.&#34;, initial: [10, 25, 10], target: [15, 15, 15], boxCount: 3 }
        ];

        const quizQuestions = [
            { question: &#34;–ö–∞–∫–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –≤ —Ä–∞–≤–µ–Ω—Å—Ç–≤–µ: (25 ‚Ä¢ 4) ‚Ä¢ 5 = 25 ‚Ä¢ (4 ‚Ä¢ 5)?&#34;, options: [&#34;–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ&#34;, &#34;–°–æ—á–µ—Ç–∞—Ç–µ–ª—å–Ω–æ–µ&#34;, &#34;–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ–ª—å–Ω–æ–µ&#34;, &#34;–í—ã—á–∏—Ç–∞–Ω–∏–µ&#34;], correct: 1 },
            { question: &#34;–ö–∞–∫–æ–π —Å–∞–º—ã–π —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –≤—ã—á–∏—Å–ª–µ–Ω–∏—è 18 ‚Ä¢ 5 &#43; 2 ‚Ä¢ 5?&#34;, options: [&#34;(18 &#43; 2) ‚Ä¢ 5&#34;, &#34;18 ‚Ä¢ 5 &#43; 10&#34;, &#34;18 ‚Ä¢ (5 &#43; 5)&#34;, &#34;20 ‚Ä¢ 10&#34;], correct: 0 },
            { question: &#34;–ù–∞–π–¥–∏ —Ñ–æ—Ä–º—É–ª—É —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –≤—ã—á–∏—Ç–∞–Ω–∏—è:&#34;, options: [&#34;(a &#43; b) ‚Ä¢ c = ac &#43; bc&#34;, &#34;(a ‚Ä¢ b) ‚Ä¢ c = a ‚Ä¢ (b ‚Ä¢ c)&#34;, &#34;(a - b) ‚Ä¢ c = ac - bc&#34;, &#34;a ‚Ä¢ b = b ‚Ä¢ a&#34;], correct: 2 },
            { question: &#34;–ö–∞–∫ –ª—É—á—à–µ —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å —á–∏—Å–ª–∞ –≤ —Å—É–º–º–µ 36 &#43; 89 &#43; 64 –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ —Å—á–µ—Ç–∞?&#34;, options: [&#34;(36 &#43; 89) &#43; 64&#34;, &#34;(36 &#43; 64) &#43; 89&#34;, &#34;(89 &#43; 64) &#43; 36&#34;, &#34;–ü–æ—Ä—è–¥–æ–∫ –Ω–µ –≤–∞–∂–µ–Ω&#34;], correct: 1 },
            { question: &#34;–ü–µ—à–µ—Ö–æ–¥ –∏–¥–µ—Ç 5 –∫–º/—á, –∞ –≤–µ–ª–æ—Å–∏–ø–µ–¥–∏—Å—Ç –≤ 3 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ. –ö–∞–∫–æ–≤–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –≤–µ–ª–æ—Å–∏–ø–µ–¥–∏—Å—Ç–∞?&#34;, options: [&#34;8 –∫–º/—á&#34;, &#34;15 –∫–º/—á&#34;, &#34;12 –∫–º/—á&#34;, &#34;20 –∫–º/—á&#34;], correct: 1 },
            { question: &#34;–§–æ—Ä–º—É–ª–∞ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞ —Å–ª–æ–∂–µ–Ω–∏—è:&#34;, options: [&#34;(a &#43; b) &#43; c = a &#43; (b &#43; c)&#34;, &#34;a &#43; b = b &#43; a&#34;, &#34;a(b &#43; c) = ab &#43; ac&#34;, &#34;a ‚Ä¢ b = b ‚Ä¢ a&#34;], correct: 1 },
            { question: &#34;–†–∞—Å–∫—Ä–æ–π —Å–∫–æ–±–∫–∏ –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏–∏ 4(x &#43; 5):&#34;, options: [&#34;4x &#43; 5&#34;, &#34;4x &#43; 9&#34;, &#34;4x &#43; 20&#34;, &#34;x &#43; 20&#34;], correct: 2 },
            { question: &#34;–ï—Å–ª–∏ –≤ 3 –∫–æ—Ä–æ–±–∫–∞—Ö –≤—Å–µ–≥–æ 30 —è–±–ª–æ–∫ –∏ –æ–Ω–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø–æ—Ä–æ–≤–Ω—É, —Å–∫–æ–ª—å–∫–æ –≤ –∫–∞–∂–¥–æ–π?&#34;, options: [&#34;5&#34;, &#34;15&#34;, &#34;10&#34;, &#34;3&#34;], correct: 2 },
            { question: &#34;–£–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –≤—ã—á–∏—Å–ª–µ–Ω–∏—è 25 ‚Ä¢ 13 ‚Ä¢ 4:&#34;, options: [&#34;(25 ‚Ä¢ 4) ‚Ä¢ 13&#34;, &#34;25 ‚Ä¢ (13 ‚Ä¢ 4)&#34;, &#34;(25 ‚Ä¢ 13) ‚Ä¢ 4&#34;, &#34;–£–º–Ω–æ–∂–∞—Ç—å –ø–æ –ø–æ—Ä—è–¥–∫—É&#34;], correct: 0 },
            { question: &#34;–ö–∞–∫ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å 5 ‚Ä¢ 34 —á–µ—Ä–µ–∑ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ–ª—å–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ?&#34;, options: [&#34;5 ‚Ä¢ (30 &#43; 4)&#34;, &#34;5 ‚Ä¢ 30 &#43; 4&#34;, &#34;5 &#43; 34&#34;, &#34;30 ‚Ä¢ (5 &#43; 4)&#34;], correct: 0 }
        ];

        const pairColors = [
            &#39;bg-emerald-100 border-emerald-500 text-emerald-800&#39;, 
            &#39;bg-sky-100 border-sky-500 text-sky-800&#39;,             
            &#39;bg-amber-100 border-amber-500 text-amber-800&#39;,       
            &#39;bg-purple-100 border-purple-500 text-purple-800&#39;     
        ];

        // --- Core Functions ---
        function render() {
            const mainContent = document.getElementById(&#39;main-content&#39;);
            const menuBtn = document.getElementById(&#39;menu-btn&#39;);
            
            if (state.currentSection === &#39;menu&#39;) {
                menuBtn.classList.add(&#39;hidden&#39;);
            } else {
                menuBtn.classList.remove(&#39;hidden&#39;);
                menuBtn.onclick = () =&gt; { state.currentSection = &#39;menu&#39;; render(); };
            }

            mainContent.innerHTML = &#39;&#39;; 

            switch (state.currentSection) {
                case &#39;menu&#39;: renderMenu(mainContent); break;
                case &#39;grouping&#39;: renderGrouping(mainContent); break;
                case &#39;error-hunt&#39;: renderErrorHunt(mainContent); break;
                case &#39;logic-balance&#39;: renderLogicBalance(mainContent); break;
                case &#39;quiz&#39;: renderQuiz(mainContent); break;
            }
            lucide.createIcons();
        }

        function renderMenu(container) {
            container.innerHTML = `
                &lt;div class=&#34;flex flex-col items-center justify-center h-full gap-8 animate-fadeIn&#34;&gt;
                    &lt;div class=&#34;text-center max-w-lg&#34;&gt;
                        &lt;h2 class=&#34;text-3xl font-bold text-indigo-800 mb-4&#34;&gt;–ü—Ä–∏–≤–µ—Ç, —é–Ω—ã–π –º–∞—Ç–µ–º–∞—Ç–∏–∫!&lt;/h2&gt;
                        &lt;p class=&#34;text-slate-600 text-lg&#34;&gt;–î–∞–≤–∞–π –Ω–µ –ø—Ä–æ—Å—Ç–æ –∑–∞—É—á–∏–≤–∞—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞, –∞ –Ω–∞—É—á–∏–º—Å—è –ø—Ä–∏–º–µ–Ω—è—Ç—å –∏—Ö —Å —É–º–æ–º –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—á–µ—Ç–∞.&lt;/p&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 w-full max-w-5xl&#34;&gt;
                        ${createMenuCard(&#39;–£–º–Ω—ã–π —Å—á–µ—Ç&#39;, &#39;calculator&#39;, &#39;–°–æ–µ–¥–∏–Ω—è–π —á–∏—Å–ª–∞ –≤ —É–¥–æ–±–Ω—ã–µ –ø–∞—Ä—ã.&#39;, &#39;emerald&#39;, &#39;grouping&#39;)}
                        ${createMenuCard(&#39;–î–µ—Ç–µ–∫—Ç–∏–≤ –æ—à–∏–±–æ–∫&#39;, &#39;check&#39;, &#39;–ù–∞–π–¥–∏ –æ—à–∏–±–∫–∏ –≤ —Ä–µ—à–µ–Ω–∏–∏ –∑–∞–¥–∞—á.&#39;, &#39;rose&#39;, &#39;error-hunt&#39;)}
                        ${createMenuCard(&#39;–í–µ—Å—ã –ª–æ–≥–∏–∫–∏&#39;, &#39;scale&#39;, &#39;–£—Ä–∞–≤–Ω—è–π —á–∞—Å—Ç–∏, –∏—Å–ø–æ–ª—å–∑—É—è –ª–æ–≥–∏–∫—É.&#39;, &#39;amber&#39;, &#39;logic-balance&#39;)}
                        ${createMenuCard(&#39;–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞–Ω–∏–π&#39;, &#39;clipboard-list&#39;, &#39;–ü—Ä–æ–π–¥–∏ —Ç–µ—Å—Ç –ø–æ —Ç–µ–º–µ —Å–≤–æ–π—Å—Ç–≤.&#39;, &#39;indigo&#39;, &#39;quiz&#39;)}
                    &lt;/div&gt;
                &lt;/div&gt;
            `;

            container.querySelectorAll(&#39;.menu-card&#39;).forEach(btn =&gt; {
                btn.addEventListener(&#39;click&#39;, () =&gt; {
                    const section = btn.dataset.section;
                    if(section === &#39;grouping&#39;) resetGrouping();
                    if(section === &#39;error-hunt&#39;) resetErrorHunt();
                    if(section === &#39;logic-balance&#39;) resetBalance();
                    if(section === &#39;quiz&#39;) resetQuiz();
                    state.currentSection = section;
                    render();
                });
            });
        }

        function createMenuCard(title, icon, desc, colorName, section) {
            const colors = {
                emerald: &#39;hover:border-emerald-400 hover:shadow-emerald-100 text-emerald-500&#39;,
                rose: &#39;hover:border-rose-400 hover:shadow-rose-100 text-rose-500&#39;,
                amber: &#39;hover:border-amber-400 hover:shadow-amber-100 text-amber-500&#39;,
                indigo: &#39;hover:border-indigo-400 hover:shadow-indigo-100 text-indigo-500&#39;
            };
            return `
                &lt;button data-section=&#34;${section}&#34; class=&#34;menu-card bg-white border-2 border-slate-100 p-6 rounded-xl shadow-sm text-left transition-all duration-300 transform hover:-translate-y-1 ${colors[colorName]} group&#34;&gt;
                    &lt;div class=&#34;mb-4 bg-slate-50 p-3 rounded-full w-fit group-hover:scale-110 transition-transform&#34;&gt;
                        &lt;i data-lucide=&#34;${icon}&#34; class=&#34;w-10 h-10&#34;&gt;&lt;/i&gt;
                    &lt;/div&gt;
                    &lt;h3 class=&#34;text-xl font-bold text-slate-800 mb-2&#34;&gt;${title}&lt;/h3&gt;
                    &lt;p class=&#34;text-slate-500 text-sm leading-relaxed&#34;&gt;${desc}&lt;/p&gt;
                &lt;/button&gt;
            `;
        }

        function resetGrouping() { state.grouping = { level: 0, selectedIds: [], matchedGroups: [], message: null, completed: false }; }

        function renderGrouping(container) {
            if (state.grouping.completed) {
                container.innerHTML = createCompletionScreen(&#39;–û—Ç–ª–∏—á–Ω–æ!&#39;, &#39;–¢—ã –Ω–∞—É—á–∏–ª—Å—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å —á–∏—Å–ª–∞ –ø–æ –∏—Ö —Å–≤–æ–π—Å—Ç–≤–∞–º.&#39;, &#39;error-hunt&#39;);
                attachCompletionListeners();
                return;
            }
            const currentLevel = groupingLevels[state.grouping.level];
            container.innerHTML = `
                &lt;div class=&#34;max-w-3xl mx-auto h-full flex flex-col&#34;&gt;
                    &lt;div class=&#34;flex justify-between items-center mb-4&#34;&gt;&lt;h2 class=&#34;text-xl font-bold text-slate-700&#34;&gt;–£—Ä–æ–≤–µ–Ω—å ${state.grouping.level &#43; 1}/4&lt;/h2&gt;&lt;/div&gt;
                    &lt;div class=&#34;bg-indigo-50 border-2 border-indigo-100 rounded-2xl p-6 mb-8 text-center shadow-sm&#34;&gt;
                        &lt;p class=&#34;text-2xl md:text-3xl font-bold text-indigo-900 leading-tight&#34;&gt;${currentLevel.hint}&lt;/p&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;grid grid-cols-2 gap-6 mb-auto&#34;&gt;
                        ${currentLevel.numbers.map(num =&gt; {
                            const matched = state.grouping.matchedGroups.find(g =&gt; g.ids.includes(num.id));
                            const solvedColor = matched ? matched.color : &#39;&#39;;
                            const isSelected = state.grouping.selectedIds.includes(num.id);
                            let classes = &#39;h-32 md:h-40 text-5xl md:text-6xl font-bold rounded-2xl border-4 transition-all duration-300 flex items-center justify-center &#39;;
                            if (solvedColor) classes &#43;= `${solvedColor} opacity-90 scale-95 shadow-inner`;
                            else if (isSelected) classes &#43;= &#39;bg-indigo-600 text-white border-indigo-700 scale-105 shadow-xl&#39;;
                            else classes &#43;= &#39;bg-white border-slate-200 text-slate-700 hover:border-indigo-300 hover:shadow-lg hover:-translate-y-1&#39;;
                            return `&lt;button onclick=&#34;handleGroupingSelect(${num.id}, ${num.val})&#34; class=&#34;${classes}&#34; ${solvedColor ? &#39;disabled&#39; : &#39;&#39;}&gt;${num.val}&lt;/button&gt;`;
                        }).join(&#39;&#39;)}
                    &lt;/div&gt;
                    ${state.grouping.message ? `&lt;div class=&#34;mt-4 text-center text-xl font-bold p-4 rounded-xl animate-pulse ${state.grouping.message.includes(&#39;!&#39;) ? &#39;bg-green-100 text-green-800&#39; : &#39;bg-red-100 text-red-800&#39;}&#34;&gt;${state.grouping.message}&lt;/div&gt;` : &#39;&#39;}
                &lt;/div&gt;
            `;
        }

        window.handleGroupingSelect = (id, val) =&gt; {
            const gState = state.grouping;
            if (gState.selectedIds.includes(id)) {
                gState.selectedIds = gState.selectedIds.filter(i =&gt; i !== id);
            } else {
                gState.selectedIds.push(id);
                if (gState.selectedIds.length === 2) checkGroupingPair();
            }
            render();
        };

        function checkGroupingPair() {
            const gState = state.grouping;
            const level = groupingLevels[gState.level];
            const ids = gState.selectedIds;
            const item1 = level.numbers.find(n =&gt; n.id === ids[0]);
            const item2 = level.numbers.find(n =&gt; n.id === ids[1]);

            let isMatch = false;
            if (level.isDistributive) isMatch = (item1.val &#43; item2.val === level.target);
            else if (level.isPartialSum) {
                if ((item1.val === 145 &amp;&amp; item2.val === 55) || (item1.val === 55 &amp;&amp; item2.val === 145)) isMatch = true;
                if ((item1.val === 280 &amp;&amp; item2.val === 20) || (item1.val === 20 &amp;&amp; item2.val === 280)) isMatch = true;
            }
            else if (level.isMult) isMatch = (item1.val * item2.val === level.target);
            else isMatch = (item1.val &#43; item2.val === level.target);

            if (isMatch) {
                const color = pairColors[gState.matchedGroups.length % pairColors.length];
                gState.matchedGroups.push({ ids: [...ids], color });
                gState.message = &#34;–û—Ç–ª–∏—á–Ω–æ! –£–¥–æ–±–Ω–∞—è –ø–∞—Ä–∞.&#34;;
                if (gState.matchedGroups.length * 2 === level.numbers.length) {
                    setTimeout(() =&gt; {
                        if (gState.level &lt; groupingLevels.length - 1) {
                            gState.level&#43;&#43;;
                            gState.selectedIds = [];
                            gState.matchedGroups = [];
                            gState.message = &#34;–í–µ–ª–∏–∫–æ–ª–µ–ø–Ω–æ! –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —ç—Ç–∞–ø—É.&#34;;
                        } else { gState.completed = true; }
                        render();
                    }, 1000);
                }
            } else { gState.message = &#34;–ù–µ —Å–æ–≤—Å–µ–º —É–¥–æ–±–Ω–æ. –ü–æ–¥—É–º–∞–π –µ—â–µ!&#34;; }

            setTimeout(() =&gt; {
                gState.message = null;
                gState.selectedIds = [];
                render();
            }, 1000);
        }

        function resetErrorHunt() { state.errorHunt = { problemIndex: 0, feedback: null }; }

        function renderErrorHunt(container) {
            if (state.errorHunt.feedback === &#34;COMPLETED_ALL&#34;) {
                container.innerHTML = createCompletionScreen(&#39;–ú–æ–ª–æ–¥–µ—Ü!&#39;, &#39;–¢—ã –¥–æ–∫–∞–∑–∞–ª, —á—Ç–æ –æ—Ç–ª–∏—á–Ω–æ —É–º–µ–µ—à—å –Ω–∞—Ö–æ–¥–∏—Ç—å –æ—à–∏–±–∫–∏ –∏ –∑–Ω–∞–µ—à—å –ø—Ä–∞–≤–∏–ª–∞.&#39;, &#39;logic-balance&#39;);
                attachCompletionListeners();
                return;
            }
            const problem = errorHuntProblems[state.errorHunt.problemIndex];
            container.innerHTML = `
                &lt;div class=&#34;max-w-2xl mx-auto bg-slate-50 p-6 rounded-xl border border-slate-200&#34;&gt;
                    &lt;div class=&#34;flex items-center gap-3 mb-4&#34;&gt;
                        &lt;span class=&#34;bg-rose-100 text-rose-600 p-2 rounded-lg font-bold&#34;&gt;#${state.errorHunt.problemIndex &#43; 1}&lt;/span&gt;
                        &lt;h3 class=&#34;text-xl font-bold text-slate-800&#34;&gt;${problem.title}&lt;/h3&gt;
                    &lt;/div&gt;
                    &lt;p class=&#34;text-slate-800 mb-6 font-bold text-lg&#34;&gt;${problem.instruction || problem.question}&lt;/p&gt;
                    &lt;div class=&#34;bg-white p-4 rounded-lg shadow-sm border border-slate-200 space-y-2 font-mono text-xl&#34;&gt;
                        ${problem.steps.map(step =&gt; {
                            let stepClass = &#34;p-4 rounded border transition-colors flex justify-between items-center &#34;;
                            if (problem.isInteractiveSteps) stepClass &#43;= &#34;cursor-pointer hover:bg-indigo-50 hover:border-indigo-300 &#34;;
                            else stepClass &#43;= &#34;border-transparent &#34;;
                            if (state.errorHunt.feedback &amp;&amp; step.status === &#39;error&#39; &amp;&amp; state.errorHunt.feedback.includes(&#39;–ù–∞—à–µ–ª&#39;)) stepClass &#43;= &#34;bg-red-50 border-red-300 &#34;;
                            return `&lt;div onclick=&#34;handleErrorStepClick(${step.id})&#34; class=&#34;${stepClass}&#34;&gt;&lt;span&gt;${step.text}&lt;/span&gt;${problem.isInteractiveSteps ? &#39;&lt;span class=&#34;text-slate-400 text-sm italic&#34;&gt;–ü—Ä–æ–≤–µ—Ä–∏—Ç—å&lt;/span&gt;&#39; : &#39;&#39;}&lt;/div&gt;`;
                        }).join(&#39;&#39;)}
                    &lt;/div&gt;
                    ${!problem.isInteractiveSteps ? `&lt;div class=&#34;mt-6 flex gap-4&#34;&gt;${problem.options.map(opt =&gt; `&lt;button onclick=&#34;handleErrorOption(&#39;${opt}&#39;)&#34; class=&#34;flex-1 px-4 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 text-lg font-medium&#34;&gt;${opt}&lt;/button&gt;`).join(&#39;&#39;)}&lt;/div&gt;` : &#39;&#39;}
                    ${state.errorHunt.feedback ? `&lt;div class=&#34;mt-6 p-4 rounded-lg border ${state.errorHunt.feedback.includes(&#39;–ù–∞—à–µ–ª&#39;) || state.errorHunt.feedback.includes(&#39;–ú–æ–ª–æ–¥–µ—Ü&#39;) ? &#39;bg-emerald-50 border-emerald-200 text-emerald-800&#39; : &#39;bg-amber-50 border-amber-200 text-amber-800&#39;}&#34;&gt;
                        &lt;div class=&#34;flex gap-2 items-center text-lg&#34;&gt;&lt;i data-lucide=&#34;${state.errorHunt.feedback.includes(&#39;–ù–∞—à–µ–ª&#39;) ? &#39;check&#39; : &#39;brain&#39;}&#34;&gt;&lt;/i&gt;&lt;p class=&#34;font-medium&#34;&gt;${state.errorHunt.feedback}&lt;/p&gt;&lt;/div&gt;
                        ${(state.errorHunt.feedback.includes(&#39;–ù–∞—à–µ–ª&#39;) || state.errorHunt.feedback.includes(&#39;–ú–æ–ª–æ–¥–µ—Ü&#39;)) ? `&lt;button onclick=&#34;nextErrorProblem()&#34; class=&#34;mt-4 w-full py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 font-bold flex justify-center items-center gap-2&#34;&gt;${state.errorHunt.problemIndex &lt; errorHuntProblems.length - 1 ? &#39;–°–ª–µ–¥—É—é—â–∞—è –∑–∞–¥–∞—á–∞&#39; : &#39;–ó–∞–≤–µ—Ä—à–∏—Ç—å&#39;} &lt;i data-lucide=&#34;chevron-right&#34;&gt;&lt;/i&gt;&lt;/button&gt;` : &#39;&#39;}
                    &lt;/div&gt;` : &#39;&#39;}
                &lt;/div&gt;
            `;
        }

        window.handleErrorStepClick = (stepId) =&gt; {
            const problem = errorHuntProblems[state.errorHunt.problemIndex];
            if (!problem.isInteractiveSteps) return;
            const step = problem.steps.find(s =&gt; s.id === stepId);
            if (step.status === &#39;error&#39;) state.errorHunt.feedback = `–ù–∞—à–µ–ª! ${step.reason}`;
            else if (step.status === &#39;correct&#39; &amp;&amp; step.reason) state.errorHunt.feedback = `–≠—Ç–æ—Ç —à–∞–≥ –≤–µ—Ä–Ω—ã–π. ${step.reason}`;
            else state.errorHunt.feedback = &#34;–ó–¥–µ—Å—å –Ω–µ—Ç –æ—à–∏–±–∫–∏. –ü—Ä–æ–≤–µ—Ä—å –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–æ–∫–∏.&#34;;
            render();
        };

        window.handleErrorOption = (opt) =&gt; {
            const problem = errorHuntProblems[state.errorHunt.problemIndex];
            if (opt === problem.correctAnswer) state.errorHunt.feedback = &#34;–ú–æ–ª–æ–¥–µ—Ü! –í —ç—Ç–æ–π –∑–∞–¥–∞—á–µ –≤—Å–µ —Å–≤–æ–π—Å—Ç–≤–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –≤–µ—Ä–Ω–æ.&#34;;
            else state.errorHunt.feedback = &#34;–û—à–∏–±—Å—è. –ü–æ—Å–º–æ—Ç—Ä–∏ –ø–æ–≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–µ–µ –µ—â–µ —Ä–∞–∑.&#34;;
            render();
        };

        window.nextErrorProblem = () =&gt; {
            state.errorHunt.feedback = null;
            if (state.errorHunt.problemIndex &lt; errorHuntProblems.length - 1) state.errorHunt.problemIndex&#43;&#43;;
            else state.errorHunt.feedback = &#34;COMPLETED_ALL&#34;;
            render();
        };

        function resetBalance() { const firstLevel = balanceLevels[0]; state.balance = { level: 0, boxes: [...firstLevel.initial], feedback: null, completed: false }; }

        function renderLogicBalance(container) {
            if (state.balance.completed) {
                container.innerHTML = createCompletionScreen(&#39;–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!&#39;, &#39;–¢—ã –ø—Ä–æ—à–µ–ª –≤—Å–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è!&#39;, &#39;menu&#39;);
                attachCompletionListeners();
                return;
            }
            const currentLevel = balanceLevels[state.balance.level];
            container.innerHTML = `
                &lt;div class=&#34;max-w-4xl mx-auto&#34;&gt;
                    &lt;div class=&#34;mb-6 bg-amber-50 p-6 rounded-xl border border-amber-100 flex justify-between items-start&#34;&gt;
                        &lt;div&gt;&lt;h2 class=&#34;text-2xl font-bold text-slate-800 mb-2&#34;&gt;${currentLevel.title}&lt;/h2&gt;&lt;p class=&#34;text-slate-700 text-lg&#34;&gt;${currentLevel.desc}&lt;/p&gt;&lt;/div&gt;
                        &lt;span class=&#34;bg-amber-200 text-amber-800 px-3 py-1 rounded-full font-bold&#34;&gt;${state.balance.level &#43; 1} / ${balanceLevels.length}&lt;/span&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;flex flex-wrap justify-center items-end gap-4 md:gap-8 my-8 min-h-[300px]&#34;&gt;
                        ${state.balance.boxes.map((count, index) =&gt; `
                            &lt;div class=&#34;flex flex-col items-center gap-4&#34;&gt;
                                &lt;div class=&#34;w-32 md:w-40 h-40 md:h-48 bg-white border-4 border-amber-300 rounded-b-3xl relative flex flex-wrap content-end justify-center p-2 gap-1 shadow-inner&#34;&gt;
                                    &lt;span class=&#34;absolute -top-12 font-bold text-3xl text-amber-800 bg-amber-100 w-12 h-12 rounded-full flex items-center justify-center border-2 border-amber-200&#34;&gt;${count}&lt;/span&gt;
                                    ${Array(count).fill(0).map(() =&gt; &#39;&lt;div class=&#34;w-5 h-5 md:w-6 md:h-6 rounded-full bg-red-500 border border-red-600&#34;&gt;&lt;/div&gt;&#39;).join(&#39;&#39;)}
                                &lt;/div&gt;
                                &lt;div class=&#34;flex gap-2&#34;&gt;
                                    ${index &gt; 0 ? `&lt;button onclick=&#34;moveBalanceItem(${index}, ${index - 1})&#34; ${count === 0 ? &#39;disabled&#39; : &#39;&#39;} class=&#34;p-2 bg-indigo-100 hover:bg-indigo-500 hover:text-white text-indigo-700 rounded-full transition shadow-md&#34;&gt;&lt;i data-lucide=&#34;arrow-left&#34; class=&#34;w-5 h-5&#34;&gt;&lt;/i&gt;&lt;/button&gt;` : &#39;&#39;}
                                    &lt;span class=&#34;font-bold text-slate-400&#34;&gt;–ö–æ—Ä–∑–∏–Ω–∞ ${index &#43; 1}&lt;/span&gt;
                                    ${index &lt; state.balance.boxes.length - 1 ? `&lt;button onclick=&#34;moveBalanceItem(${index}, ${index &#43; 1})&#34; ${count === 0 ? &#39;disabled&#39; : &#39;&#39;} class=&#34;p-2 bg-indigo-100 hover:bg-indigo-500 hover:text-white text-indigo-700 rounded-full transition shadow-md&#34;&gt;&lt;i data-lucide=&#34;arrow-right&#34; class=&#34;w-5 h-5&#34;&gt;&lt;/i&gt;&lt;/button&gt;` : &#39;&#39;}
                                &lt;/div&gt;
                            &lt;/div&gt;
                        `).join(&#39;&#39;)}
                    &lt;/div&gt;
                    &lt;div class=&#34;bg-white p-6 rounded-xl shadow-lg border border-slate-100 min-h-[100px] flex items-center justify-center&#34;&gt;
                        ${state.balance.feedback ? `&lt;div class=&#34;text-emerald-600 font-bold text-2xl flex flex-col items-center gap-2 animate-bounce&#34;&gt;
                            &lt;div class=&#34;flex items-center gap-2&#34;&gt;&lt;i data-lucide=&#34;check&#34; class=&#34;w-8 h-8&#34;&gt;&lt;/i&gt; ${state.balance.feedback}&lt;/div&gt;
                            &lt;button onclick=&#34;nextBalanceLevel()&#34; class=&#34;mt-2 text-base bg-emerald-100 px-6 py-2 rounded-lg hover:bg-emerald-200 text-emerald-800 transition&#34;&gt;
                                ${state.balance.level &lt; balanceLevels.length - 1 ? &#34;–°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å &gt;&#34; : &#34;–ó–∞–≤–µ—Ä—à–∏—Ç—å&#34;}
                            &lt;/button&gt;
                        &lt;/div&gt;` : &#39;&lt;p class=&#34;text-slate-400 italic text-xl text-center&#34;&gt;–ò—Å–ø–æ–ª—å–∑—É–π —Å—Ç—Ä–µ–ª–æ—á–∫–∏, —á—Ç–æ–±—ã –ø–µ—Ä–µ–∫–ª–∞–¥—ã–≤–∞—Ç—å —è–±–ª–æ–∫–∏...&lt;/p&gt;&#39;}
                    &lt;/div&gt;
                &lt;/div&gt;
            `;
        }

        window.moveBalanceItem = (from, to) =&gt; {
            const boxes = state.balance.boxes;
            if (boxes[from] &gt; 0) { boxes[from]--; boxes[to]&#43;&#43;; }
            const allEqual = boxes.every(val =&gt; val === boxes[0]);
            state.balance.feedback = (allEqual &amp;&amp; boxes[0] &gt; 0) ? `–°—É–ø–µ—Ä! –í –∫–∞–∂–¥–æ–π –∫–æ—Ä–∑–∏–Ω–µ —Ç–µ–ø–µ—Ä—å –ø–æ ${boxes[0]} —è–±–ª–æ–∫.` : null;
            render();
        };

        window.nextBalanceLevel = () =&gt; {
            if (state.balance.level &lt; balanceLevels.length - 1) {
                state.balance.level&#43;&#43;;
                state.balance.boxes = [...balanceLevels[state.balance.level].initial];
                state.balance.feedback = null;
            } else { state.balance.completed = true; }
            render();
        };

        function resetQuiz() { state.quiz = { questionIndex: 0, score: 0, selectedOption: null, isAnswered: false, completed: false }; }

        function renderQuiz(container) {
            if (state.quiz.completed) {
                container.innerHTML = createCompletionScreen(&#39;–¢–µ—Å—Ç –æ–∫–æ–Ω—á–µ–Ω!&#39;, `–†–µ–∑—É–ª—å—Ç–∞—Ç: ${state.quiz.score} –∏–∑ ${quizQuestions.length}. ${state.quiz.score === quizQuestions.length ? &#39;–û—Ç–ª–∏—á–Ω–æ!&#39; : &#39;–•–æ—Ä–æ—à–æ, –Ω–æ —Å—Ç–æ–∏—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞ –µ—â–µ —Ä–∞–∑.&#39;}`, &#39;menu&#39;);
                attachCompletionListeners();
                return;
            }
            const currentQ = quizQuestions[state.quiz.questionIndex];
            container.innerHTML = `
                &lt;div class=&#34;max-w-2xl mx-auto bg-white p-6 rounded-xl border border-slate-200 shadow-sm flex flex-col&#34;&gt;
                    &lt;div class=&#34;flex justify-between items-center mb-6&#34;&gt;&lt;h2 class=&#34;text-xl font-bold text-slate-800&#34;&gt;–í–æ–ø—Ä–æ—Å ${state.quiz.questionIndex &#43; 1} / ${quizQuestions.length}&lt;/h2&gt;&lt;span class=&#34;bg-indigo-100 text-indigo-600 px-3 py-1 rounded-full text-sm font-bold&#34;&gt;–ë–∞–ª–ª—ã: ${state.quiz.score}&lt;/span&gt;&lt;/div&gt;
                    &lt;div class=&#34;mb-8&#34;&gt;&lt;p class=&#34;text-2xl font-bold text-slate-900 leading-snug&#34;&gt;${currentQ.question}&lt;/p&gt;&lt;/div&gt;
                    &lt;div class=&#34;flex flex-col gap-3&#34;&gt;
                        ${currentQ.options.map((opt, idx) =&gt; {
                            let btnClass = &#34;w-full p-4 text-left border-2 rounded-xl transition-all font-medium text-lg &#34;;
                            if (state.quiz.isAnswered) {
                                if (idx === currentQ.correct) btnClass &#43;= &#34;bg-emerald-100 border-emerald-500 text-emerald-800 &#34;;
                                else if (idx === state.quiz.selectedOption) btnClass &#43;= &#34;bg-rose-100 border-rose-500 text-rose-800 &#34;;
                                else btnClass &#43;= &#34;bg-slate-50 border-slate-200 text-slate-400 &#34;;
                            } else { btnClass &#43;= &#34;bg-white border-slate-200 text-slate-700 hover:border-indigo-400 hover:bg-indigo-50 &#34;; }
                            return `&lt;button onclick=&#34;handleQuizOption(${idx})&#34; ${state.quiz.isAnswered ? &#39;disabled&#39; : &#39;&#39;} class=&#34;${btnClass}&#34;&gt;${opt}&lt;/button&gt;`;
                        }).join(&#39;&#39;)}
                    &lt;/div&gt;
                    ${state.quiz.isAnswered ? `&lt;div class=&#34;mt-6 flex justify-end&#34;&gt;&lt;button onclick=&#34;nextQuizQuestion()&#34; class=&#34;px-8 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 font-bold flex items-center gap-2&#34;&gt;–î–∞–ª–µ–µ &lt;i data-lucide=&#34;arrow-right&#34;&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;` : &#39;&#39;}
                &lt;/div&gt;
            `;
        }

        window.handleQuizOption = (idx) =&gt; {
            if (state.quiz.isAnswered) return;
            state.quiz.selectedOption = idx;
            state.quiz.isAnswered = true;
            if (idx === quizQuestions[state.quiz.questionIndex].correct) state.quiz.score&#43;&#43;;
            render();
        };

        window.nextQuizQuestion = () =&gt; {
            if (state.quiz.questionIndex &lt; quizQuestions.length - 1) {
                state.quiz.questionIndex&#43;&#43;;
                state.quiz.selectedOption = null;
                state.quiz.isAnswered = false;
            } else { state.quiz.completed = true; }
            render();
        };

        function createCompletionScreen(title, desc, nextSection) {
            const btnText = nextSection === &#39;menu&#39; ? &#39;–í –º–µ–Ω—é&#39; : &#39;–î–∞–ª–µ–µ&#39;;
            return `
                &lt;div class=&#34;flex flex-col items-center justify-center h-full text-center p-6&#34;&gt;
                    &lt;i data-lucide=&#34;sparkles&#34; class=&#34;w-20 h-20 text-yellow-500 mb-6 animate-bounce&#34;&gt;&lt;/i&gt;
                    &lt;h2 class=&#34;text-4xl font-bold text-indigo-800 mb-4&#34;&gt;${title}&lt;/h2&gt;
                    &lt;p class=&#34;text-slate-600 text-xl mb-8 max-w-md&#34;&gt;${desc}&lt;/p&gt;
                    &lt;div class=&#34;flex gap-4&#34;&gt;
                        &lt;button onclick=&#34;state.currentSection=&#39;menu&#39;; render()&#34; class=&#34;px-6 py-3 border-2 border-indigo-200 text-indigo-700 rounded-xl hover:bg-indigo-50 font-bold&#34;&gt;–í –º–µ–Ω—é&lt;/button&gt;
                        ${nextSection !== &#39;menu&#39; ? `&lt;button id=&#34;next-task-btn&#34; data-next=&#34;${nextSection}&#34; class=&#34;px-8 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 shadow-lg font-bold flex items-center gap-2 text-lg&#34;&gt;${btnText} &lt;i data-lucide=&#34;arrow-right&#34;&gt;&lt;/i&gt;&lt;/button&gt;` : &#39;&#39;}
                    &lt;/div&gt;
                &lt;/div&gt;
            `;
        }

        function attachCompletionListeners() {
            const btn = document.getElementById(&#39;next-task-btn&#39;);
            if(btn) {
                btn.onclick = () =&gt; {
                    const next = btn.dataset.next;
                    if(next === &#39;error-hunt&#39;) resetErrorHunt();
                    if(next === &#39;logic-balance&#39;) resetBalance();
                    if(next === &#39;quiz&#39;) resetQuiz();
                    state.currentSection = next;
                    render();
                }
            }
            lucide.createIcons();
        }

        render();
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;"
                                class="absolute top-0 left-0 w-full h-full border-0" loading="lazy" allowfullscreen>
                            </iframe>
                            
                            <button id="exitBtn137_ru" onclick="closeTaskFullscreen()"
                                class="hidden absolute top-4 right-4 bg-red-600 text-white px-4 py-2 rounded-lg shadow-lg hover:bg-red-700 transition-colors z-50 flex items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M6 18L18 6M6 6l12 12" />
                                </svg>
                                <span>–ó–∞–∫—Ä—ã—Ç—å</span>
                            </button>
                        </div>

                        
                        <div class="bg-gray-50 p-2 border-t border-gray-200">
                            <a href="/task/137" target="_blank"
                                class="text-red-600 hover:text-red-800 font-medium flex items-center justify-center gap-1 text-sm">
                                <span>–û—Ç–∫—Ä—ã—Ç—å –≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ</span>
                                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14">
                                    </path>
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>

                
                <div class="text-center text-sm text-gray-600 mt-2">
                    <span>üí°</span>
                    <span>–û—Ä—ã–Ω–¥–∞–ø –±–æ–ª“ì–∞–Ω–Ω–∞–Ω –∫–µ–π—ñ–Ω –∫–µ–ª–µ—Å—ñ —Ç–∞–ø—Å—ã—Ä–º–∞“ì–∞ ”©—Ç—ñ“£—ñ–∑ / –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É
                        –∑–∞–¥–∞–Ω–∏—é</span>
                </div>
                
            </div>
        </div>

        
        <script>
            
            function openTaskFullscreen(taskId, lang) {
                
                if (document.fullscreenElement || document.webkitFullscreenElement || document.msFullscreenElement) {
                    closeTaskFullscreen();
                } else {
                    
                    const containerId = lang === 'ru' ? 'fsContainer' + taskId + '_ru' : 'fsContainer' + taskId;
                    const exitBtnId = lang === 'ru' ? 'exitBtn' + taskId + '_ru' : 'exitBtn' + taskId;

                    const container = document.getElementById(containerId);
                    const exitBtn = document.getElementById(exitBtnId);

                    if (container) {
                        if (container.requestFullscreen) {
                            container.requestFullscreen();
                        } else if (container.webkitRequestFullscreen) {
                            container.webkitRequestFullscreen();
                        } else if (container.msRequestFullscreen) {
                            container.msRequestFullscreen();
                        }

                        
                        if (exitBtn) {
                            exitBtn.classList.remove('hidden');

                            
                            const onFullscreenChange = () => {
                                if (!document.fullscreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement) {
                                    exitBtn.classList.add('hidden');
                                    document.removeEventListener('fullscreenchange', onFullscreenChange);
                                    document.removeEventListener('webkitfullscreenchange', onFullscreenChange);
                                    document.removeEventListener('msfullscreenchange', onFullscreenChange);
                                }
                            };

                            document.addEventListener('fullscreenchange', onFullscreenChange);
                            document.addEventListener('webkitfullscreenchange', onFullscreenChange);
                            document.addEventListener('msfullscreenchange', onFullscreenChange);
                        }
                    } else {
                        
                        const langParam = lang ? '?lang=' + lang : '';
                        window.open('\/task\/' + taskId + langParam, '_blank');
                    }
                }
            }

            function closeTaskFullscreen() {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
            }
        </script>
        

        
        <div class="bg-gradient-to-br from-indigo-50 to-purple-50 p-6 rounded-2xl mt-8 border-2 border-indigo-200">
            <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                <span role="img" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è">üß≠</span>
                –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —É—Ä–æ–∫–∞–º
            </h3>
            <div class="grid md:grid-cols-3 gap-4">
                <a href="/grade/5"
                    class="flex items-center gap-2 bg-white hover:bg-purple-50 p-4 rounded-xl border-2 border-transparent hover:border-purple-400 transition-all">
                    <span role="img" aria-label="–ù–∞–∑–∞–¥ –∫ –∫–ª–∞—Å—Å—É">üìö</span>
                    <div>
                        <div class="text-sm text-gray-500">–í—Å–µ —É—Ä–æ–∫–∏</div>
                        <div class="font-bold text-gray-800">5-–∫–ª–∞—Å—Å</div>
                    </div>
                </a>
                <a href="/"
                    class="flex items-center gap-2 bg-white hover:bg-blue-50 p-4 rounded-xl border-2 border-transparent hover:border-blue-400 transition-all">
                    <span role="img" aria-label="–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞">üè†</span>
                    <div>
                        <div class="text-sm text-gray-500">–í–µ—Ä–Ω—É—Ç—å—Å—è</div>
                        <div class="font-bold text-gray-800">–ì–ª–∞–≤–Ω–∞—è</div>
                    </div>
                </a>
                <a href="/about"
                    class="flex items-center gap-2 bg-white hover:bg-green-50 p-4 rounded-xl border-2 border-transparent hover:border-green-400 transition-all">
                    <span role="img" aria-label="–û –ø—Ä–æ–µ–∫—Ç–µ">üíé</span>
                    <div>
                        <div class="text-sm text-gray-500">–û –ø—Ä–æ–µ–∫—Ç–µ</div>
                        <div class="font-bold text-gray-800">VisualMath</div>
                    </div>
                </a>
            </div>
            <div class="mt-4 text-center text-sm text-gray-600">
                üí° –°–æ–≤–µ—Ç: –¥–æ–±–∞–≤—å—Ç–µ —Å–∞–π—Ç –≤ –∑–∞–∫–ª–∞–¥–∫–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
            </div>
        </div>


        
        <div class="mb-8">
            <div
                class="bg-gradient-to-br from-purple-50 to-pink-50 p-6 md:p-8 rounded-2xl shadow-lg border-2 border-purple-200">
                
                <div class="flex items-center justify-center gap-3 mb-4">
                    <div class="w-12 h-12 gradient-bg rounded-full flex items-center justify-center animate-pulse">
                        <span class="text-2xl">üì¢</span>
                    </div>
                    <h3 class="text-xl md:text-2xl font-bold text-gray-800 text-center">–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å –∫–æ–ª–ª–µ–≥–∞–º–∏!</h3>
                </div>

                
                <div class="space-y-2 mb-6 text-center">
                    <p class="text-gray-700 font-medium flex items-center justify-center gap-2 flex-wrap">
                        <span class="text-lg">üá∞üáø</span>
                        <span>–°–∞–π—Ç—Ç—ã“£ –¥–∞–º—É—ã–Ω–∞ “Ø–ª–µ—Å “õ–æ—Å—É “Ø—à—ñ–Ω, –º“±“ì–∞–ª—ñ–º–¥–µ—Ä —á–∞—Ç—ã–Ω–¥–∞ –±”©–ª—ñ—Å—ñ“£—ñ–∑!</span>
                    </p>
                    <p class="text-gray-700 font-medium flex items-center justify-center gap-2 flex-wrap">
                        <span class="text-lg">üá∑üá∫</span>
                        <span>–ü–æ–º–æ–≥–∏—Ç–µ —Ä–∞–∑–≤–∏—Ç–∏—é —Å–∞–π—Ç–∞ ‚Äî –ø–æ–¥–µ–ª–∏—Ç–µ—Å—å –≤ —á–∞—Ç–∞—Ö —É—á–∏—Ç–µ–ª–µ–π!</span>
                    </p>
                </div>

                
                <div class="flex flex-col sm:flex-row gap-3 justify-center">
                    
                    <a id="shareWhatsApp" href="#"
                        class="flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-xl font-semibold transition-all transform hover:scale-105 shadow-md hover:shadow-lg">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path
                                d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z" />
                        </svg>
                        <span>WhatsApp</span>
                    </a>

                    
                    <a id="shareTelegram" href="#"
                        class="flex items-center justify-center gap-2 bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-xl font-semibold transition-all transform hover:scale-105 shadow-md hover:shadow-lg">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path
                                d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z" />
                        </svg>
                        <span>Telegram</span>
                    </a>

                    
                    <button id="shareGeneric"
                        class="flex items-center justify-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-xl font-semibold transition-all transform hover:scale-105 shadow-md hover:shadow-lg">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" />
                        </svg>
                        <span>–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</span>
                    </button>
                </div>
            </div>
        </div>

        
        <script>
            (function () {
                const pageUrl = window.location.href;
                const pageTitle = document.title;
                const shareMessage = `üìê VisualMath - ${pageTitle}\n\n–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –∑–∞–¥–∞–Ω–∏—è –ø–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ!\n–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –±–æ–π—ã–Ω—à–∞ —Ç–µ–≥—ñ–Ω –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è–ª–∞—Ä –∂”ô–Ω–µ —Ç–∞–ø—Å—ã—Ä–º–∞–ª–∞—Ä!\n\n`;

                
                document.getElementById('shareWhatsApp').addEventListener('click', function (e) {
                    e.preventDefault();
                    const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(shareMessage + pageUrl)}`;
                    window.open(whatsappUrl, '_blank');
                });

                
                document.getElementById('shareTelegram').addEventListener('click', function (e) {
                    e.preventDefault();
                    const telegramUrl = `https://t.me/share/url?url=${encodeURIComponent(pageUrl)}&text=${encodeURIComponent(shareMessage)}`;
                    window.open(telegramUrl, '_blank');
                });

                
                document.getElementById('shareGeneric').addEventListener('click', async function (e) {
                    e.preventDefault();

                    if (navigator.share) {
                        try {
                            await navigator.share({
                                title: pageTitle,
                                text: shareMessage,
                                url: pageUrl
                            });
                        } catch (err) {
                            if (err.name !== 'AbortError') {
                                copyToClipboard();
                            }
                        }
                    } else {
                        copyToClipboard();
                    }
                });

                function copyToClipboard() {
                    const textToCopy = shareMessage + pageUrl;
                    navigator.clipboard.writeText(textToCopy).then(function () {
                        alert('‚úÖ –°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞! / –°—ñ–ª—Ç–µ–º–µ –∫”©—à—ñ—Ä—ñ–ª–¥—ñ!');
                    }, function (err) {
                        
                        const textArea = document.createElement('textarea');
                        textArea.value = textToCopy;
                        document.body.appendChild(textArea);
                        textArea.select();
                        document.execCommand('copy');
                        document.body.removeChild(textArea);
                        alert('‚úÖ –°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞! / –°—ñ–ª—Ç–µ–º–µ –∫”©—à—ñ—Ä—ñ–ª–¥—ñ!');
                    });
                }
            })();
        </script>



    </main>

    <footer class="bg-gray-900 text-white p-8 mt-auto">
        <div class="container mx-auto text-center">
            <div class="text-2xl mb-4">üìê VisualMath</div>
            <p class="text-gray-400 mb-4">&copy; 2026 VisualMath. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            <div class="space-x-6">
                <a href="/privacy" class="text-gray-400 hover:text-white transition-colors">–ü–æ–ª–∏—Ç–∏–∫–∞
                    –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
                <a href="/terms" class="text-gray-400 hover:text-white transition-colors">–£—Å–ª–æ–≤–∏—è
                    –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a>
                <a href="/about" class="text-gray-400 hover:text-white transition-colors">–û –Ω–∞—Å</a>
            </div>
        </div>
    </footer>
</body>

</html>